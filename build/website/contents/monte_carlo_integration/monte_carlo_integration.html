<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel=stylesheet href="/pygments.css" type="text/css">
    <link rel=stylesheet href="/styles/style.css" type="text/css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <title id="ttl"></title>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
</head>
<body>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {inlineMath: [['$','$']]}
        });
    </script>
    <script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script>
        var bjs = {"gitbook": "3.x.x", "plugins": ["fontsettings", "mathjax@https://github.com/algorithm-archivists/plugin-mathjax", "bibtex-cite", "wordcount", "api-language-selector@https://github.com/algorithm-archivists/gitbook-plugin-api-language-selector.git", "include-codeblock", "ga", "bulk-redirect", "prism", "-highlight"], "lunr": {"maxIndexSize": 1000000000}, "pluginsConfig": {"mathjax": {"version": "2.6.1"}, "include-codeblock": {"fixlang": true, "unindent": true}, "bulk-redirect": {"basepath": "/", "redirectsFile": "redirects.json"}, "ga": {"token": "UA-118252470-1"}, "prism": {"lang": {"asm-x64": "nasm"}, "ignore": ["emojicode", "text"], "css": ["prismjs/themes/prism-tomorrow.css"]}, "api-language-selector": {"languages": [{"lang": "jl", "name": "Julia", "default": true}, {"lang": "bash", "name": "Bash"}, {"lang": "cs", "name": "C#"}, {"lang": "cpp", "name": "C++"}, {"lang": "c", "name": "C"}, {"lang": "c8", "name": "chip-8"}, {"lang": "py", "name": "Python"}, {"lang": "js", "name": "JavaScript"}, {"lang": "scratch", "name": "Scratch"}, {"lang": "hs", "name": "Haskell"}, {"lang": "rs", "name": "Rust"}, {"lang": "ml", "name": "OCaml"}, {"lang": "java", "name": "Java"}, {"lang": "clj", "name": "Clojure"}, {"lang": "elm", "name": "Elm"}, {"lang": "LabVIEW", "name": "LabVIEW"}, {"lang": "d", "name": "D"}, {"lang": "go", "name": "Go"}, {"lang": "swift", "name": "Swift"}, {"lang": "racket", "name": "Racket"}, {"lang": "m", "name": "Matlab"}, {"lang": "r", "name": "R"}, {"lang": "ti83b", "name": "TI-83 Basic"}, {"lang": "lua", "name": "Lua"}, {"lang": "crystal", "name": "Crystal"}, {"lang": "php", "name": "PHP"}, {"lang": "lisp", "name": "Common Lisp"}, {"lang": "nim", "name": "Nim"}, {"lang": "asm-x64", "name": "X86-64 Assembly"}, {"lang": "f90", "name": "Fortran90"}, {"lang": "factor", "name": "Factor"}, {"lang": "ws", "name": "Whitespace"}, {"lang": "scala", "name": "Scala"}, {"lang": "emojic", "name": "Emojicode"}, {"lang": "lolcode", "name": "LOLCODE"}, {"lang": "piet", "name": "Piet"}, {"lang": "ss", "name": "Scheme"}, {"lang": "ps1", "name": "PowerShell"}, {"lang": "v", "name": "Vlang"}, {"lang": "coffee", "name": "CoffeeScript"}, {"lang": "kotlin", "name": "Kotlin"}]}}};		    
        var lang = "jl";
        var langs = {};
        var langNames = bjs.pluginsConfig["api-language-selector"].languages;
        var translations = {
            "python": "Python",
            "bf": "Brainfuck",
            "st": "Smalltalk",
            "ruby": "Ruby",
            "kotlin": "Kotlin",
            "bash": "Bash",
            "haskell": "Haskell",
            "matlab": "Matlab",
            "javascript": "JavaScript"
        };
	
        function initLangs () {
            var samples = document.getElementsByClassName("code-section");
            for (var a = 0; a < samples.length; a++) {
                var sample = samples[a];
                var children = sample.children;
                for (var b = 0; b < children.length; b++)  {
                    var element = children[b];
                    langs[element.className] = true;
                };
            };
	    langs = Object.keys(langs);
	    if (langs.length == 1) {
		lang = langs[0];
	    }
            langNames.forEach(function(element) { translations[element.lang] = element.name });
        }
        function reload() {
            var samples = document.getElementsByClassName("code-section");
            for (var a = 0; a < samples.length; a++) {
                var sample = samples[a];
                var children = sample.children;
                for (var b = 0; b < children.length; b++)  {
                    var element = children[b];
                    if (element.className == lang) {
                        element.style.display = 'block';
                    } else {
                        element.style.display = 'none';
                    }
                };
            };
        };
        window.onload = () => {
            initLangs();
            reload();
            document.getElementById("name").innerText = pages[index];
            document.getElementById("ttl").innerText = pages[index];
            initLs();
        };
        var index = 15;
        var pages = [];
	var lsed = false;
				
        function flipLs () {
            var ls = document.getElementById("ls");
            var ls2 = document.getElementById("ls2");
            if (lsed) {
                ls.style.display = 'none';
                ls2.style.display = 'none';
            } else {
                ls.style.display = 'block';
                ls2.style.display = 'block';
            }
            lsed = !lsed
        }

	var funcs = {};
        function initLs () {
            if (langs.length === 0) {
                document.getElementById("flipper").remove();
            } else {
                var h1 = 0;
                var h2 = 0;
                for (var i = 0; i < langs.length; i++) {
                    let language = langs[i];
		    console.log(language);
		    var elem = document.createElement("p");
                    funcs[language] = {}
                    funcs[language] = () => {
                        lang = language;
                        reload();
                    };
                    elem.innerHTML = "<a onclick='funcs[\"" + language + "\"]()' href='#' class=ls-link>" + translations[language] + "</a>";
                    if (i % 2) {
                        h2 += 1
                        document.getElementById("ls2").appendChild(elem);
                    } else {
                        h1 += 1
                        document.getElementById("ls").appendChild(elem);
                    }
                }
                if (h1 > h2) {
                    var elem = document.createElement("p");
                    elem.innerHTML = "&nbsp;";
                    document.getElementById("ls2").appendChild(elem);
                } else if (h2 > h1) {
                    var elem = document.createElement("p");
                    elem.innerHTML = "&nbsp;";
                    document.getElementById("ls").appendChild(elem);
                }
                document.getElementById("ls").style.display = "none";
                document.getElementById("ls2").style.display = "none";
            }
        }
        function toggleSidenav () {
            $("#sidebar").toggleClass("hide");
            $("#content").toggleClass("on-sidebar");
            $("#navbar").toggleClass("no-sidebar");
        }
    </script>
    <div class="sidebar-wrapper" id="sidebar">
        
            <p>
                
                <a name="Algorithm Archive"></a>
                <a href="/index.html#Algorithm Archive">Algorithm Archive</a>
                <script>pages[0] = "Algorithm Archive"</script>
            </p>
        
            <p>
                
                <a name="Introduction"></a>
                <a href="/contents/introduction/introduction.html#Introduction">Introduction</a>
                <script>pages[1] = "Introduction"</script>
            </p>
        
            <p>
                
                <a name="How To Contribute"></a>
                <a href="/contents/how_to_contribute/how_to_contribute.html#How To Contribute">How To Contribute</a>
                <script>pages[2] = "How To Contribute"</script>
            </p>
        
            <p>
                
                <a name="Plotting"></a>
                <a href="/contents/plotting/plotting.html#Plotting">Plotting</a>
                <script>pages[3] = "Plotting"</script>
            </p>
        
            <p>
                
                <a name="Data Structures"></a>
                <a href="/contents/data_structures/data_structures.html#Data Structures">Data Structures</a>
                <script>pages[4] = "Data Structures"</script>
            </p>
        
            <p>
                
                    &nbsp;
                
                <a name="Stacks and Queues"></a>
                <a href="/contents/stacks_and_queues/stacks_and_queues.html#Stacks and Queues">Stacks and Queues</a>
                <script>pages[5] = "Stacks and Queues"</script>
            </p>
        
            <p>
                
                <a name="Mathematical Background"></a>
                <a href="/contents/mathematical_background/mathematical_background.html#Mathematical Background">Mathematical Background</a>
                <script>pages[6] = "Mathematical Background"</script>
            </p>
        
            <p>
                
                    &nbsp;
                
                <a name="Complexity Notation"></a>
                <a href="/contents/notation/notation.html#Complexity Notation">Complexity Notation</a>
                <script>pages[7] = "Complexity Notation"</script>
            </p>
        
            <p>
                
                    &nbsp;
                
                <a name="Bit Logic"></a>
                <a href="/contents/bitlogic/bitlogic.html#Bit Logic">Bit Logic</a>
                <script>pages[8] = "Bit Logic"</script>
            </p>
        
            <p>
                
                    &nbsp;
                
                <a name="Taylor Series"></a>
                <a href="/contents/taylor_series_expansion/taylor_series_expansion.html#Taylor Series">Taylor Series</a>
                <script>pages[9] = "Taylor Series"</script>
            </p>
        
            <p>
                
                <a name="Sorting and Searching"></a>
                <a href="/contents/sorting_and_searching/sorting_and_searching.html#Sorting and Searching">Sorting and Searching</a>
                <script>pages[10] = "Sorting and Searching"</script>
            </p>
        
            <p>
                
                    &nbsp;
                
                <a name="Bubble Sort"></a>
                <a href="/contents/bubble_sort/bubble_sort.html#Bubble Sort">Bubble Sort</a>
                <script>pages[11] = "Bubble Sort"</script>
            </p>
        
            <p>
                
                    &nbsp;
                
                <a name="Bogo Sort"></a>
                <a href="/contents/bogo_sort/bogo_sort.html#Bogo Sort">Bogo Sort</a>
                <script>pages[12] = "Bogo Sort"</script>
            </p>
        
            <p>
                
                <a name="Tree Traversal"></a>
                <a href="/contents/tree_traversal/tree_traversal.html#Tree Traversal">Tree Traversal</a>
                <script>pages[13] = "Tree Traversal"</script>
            </p>
        
            <p>
                
                <a name="Euclidean Algorithm"></a>
                <a href="/contents/euclidean_algorithm/euclidean_algorithm.html#Euclidean Algorithm">Euclidean Algorithm</a>
                <script>pages[14] = "Euclidean Algorithm"</script>
            </p>
        
            <p>
                
                <a name="Monte Carlo"></a>
                <a href="/contents/monte_carlo_integration/monte_carlo_integration.html#Monte Carlo">Monte Carlo</a>
                <script>pages[15] = "Monte Carlo"</script>
            </p>
        
            <p>
                
                <a name="Matrix Methods"></a>
                <a href="/contents/matrix_methods/matrix_methods.html#Matrix Methods">Matrix Methods</a>
                <script>pages[16] = "Matrix Methods"</script>
            </p>
        
            <p>
                
                    &nbsp;
                
                <a name="Gaussian Elimination"></a>
                <a href="/contents/gaussian_elimination/gaussian_elimination.html#Gaussian Elimination">Gaussian Elimination</a>
                <script>pages[17] = "Gaussian Elimination"</script>
            </p>
        
            <p>
                
                    &nbsp;
                
                <a name="Thomas Algorithm"></a>
                <a href="/contents/thomas_algorithm/thomas_algorithm.html#Thomas Algorithm">Thomas Algorithm</a>
                <script>pages[18] = "Thomas Algorithm"</script>
            </p>
        
            <p>
                
                <a name="Computational Geometry"></a>
                <a href="/contents/computational_geometry/computational_geometry.html#Computational Geometry">Computational Geometry</a>
                <script>pages[19] = "Computational Geometry"</script>
            </p>
        
            <p>
                
                    &nbsp;
                
                <a name="Gift Wrapping"></a>
                <a href="/contents/gift_wrapping/gift_wrapping.html#Gift Wrapping">Gift Wrapping</a>
                <script>pages[20] = "Gift Wrapping"</script>
            </p>
        
            <p>
                
                    &nbsp;
                
                    &nbsp;
                
                <a name="Jarvis March"></a>
                <a href="/contents/jarvis_march/jarvis_march.html#Jarvis March">Jarvis March</a>
                <script>pages[21] = "Jarvis March"</script>
            </p>
        
            <p>
                
                    &nbsp;
                
                    &nbsp;
                
                <a name="Graham Scan"></a>
                <a href="/contents/graham_scan/graham_scan.html#Graham Scan">Graham Scan</a>
                <script>pages[22] = "Graham Scan"</script>
            </p>
        
            <p>
                
                <a name="FFT"></a>
                <a href="/contents/cooley_tukey/cooley_tukey.html#FFT">FFT</a>
                <script>pages[23] = "FFT"</script>
            </p>
        
            <p>
                
                <a name="Decision Problems"></a>
                <a href="/contents/decision_problems/decision_problems.html#Decision Problems">Decision Problems</a>
                <script>pages[24] = "Decision Problems"</script>
            </p>
        
            <p>
                
                    &nbsp;
                
                <a name="Stable Marriage Problem"></a>
                <a href="/contents/stable_marriage_problem/stable_marriage_problem.html#Stable Marriage Problem">Stable Marriage Problem</a>
                <script>pages[25] = "Stable Marriage Problem"</script>
            </p>
        
            <p>
                
                <a name="Differential Equation Solvers"></a>
                <a href="/contents/differential_equations/differential_equations.html#Differential Equation Solvers">Differential Equation Solvers</a>
                <script>pages[26] = "Differential Equation Solvers"</script>
            </p>
        
            <p>
                
                    &nbsp;
                
                <a name="Forward Euler Method"></a>
                <a href="/contents/forward_euler_method/forward_euler_method.html#Forward Euler Method">Forward Euler Method</a>
                <script>pages[27] = "Forward Euler Method"</script>
            </p>
        
            <p>
                
                <a name="Physics Solvers"></a>
                <a href="/contents/physics_solvers/physics_solvers.html#Physics Solvers">Physics Solvers</a>
                <script>pages[28] = "Physics Solvers"</script>
            </p>
        
            <p>
                
                    &nbsp;
                
                <a name="Verlet Integration"></a>
                <a href="/contents/verlet_integration/verlet_integration.html#Verlet Integration">Verlet Integration</a>
                <script>pages[29] = "Verlet Integration"</script>
            </p>
        
            <p>
                
                    &nbsp;
                
                <a name="Quantum Systems"></a>
                <a href="/contents/quantum_systems/quantum_systems.html#Quantum Systems">Quantum Systems</a>
                <script>pages[30] = "Quantum Systems"</script>
            </p>
        
            <p>
                
                    &nbsp;
                
                    &nbsp;
                
                <a name="Split-Operator Method"></a>
                <a href="/contents/split-operator_method/split-operator_method.html#Split-Operator Method">Split-Operator Method</a>
                <script>pages[31] = "Split-Operator Method"</script>
            </p>
        
            <p>
                
                <a name="Data Compression"></a>
                <a href="/contents/data_compression/data_compression.html#Data Compression">Data Compression</a>
                <script>pages[32] = "Data Compression"</script>
            </p>
        
            <p>
                
                    &nbsp;
                
                <a name="Huffman Encoding"></a>
                <a href="/contents/huffman_encoding/huffman_encoding.html#Huffman Encoding">Huffman Encoding</a>
                <script>pages[33] = "Huffman Encoding"</script>
            </p>
        
            <p>
                
                <a name="Quantum Information"></a>
                <a href="/contents/quantum_information/quantum_information.html#Quantum Information">Quantum Information</a>
                <script>pages[34] = "Quantum Information"</script>
            </p>
        
        <hr>
    </div>
    <nav class="navbarrio" id=navbar>
        <ul class="navbarro">
            <li>
                <span onclick="toggleSidenav()">
                    <i class="fas fa-align-left"></i>
                </button>
            </li>
            <li>
                <span onclick="flipLs()" id=flipper>
                    <i class="fas fa-code"></i>
                    <div class=ls id=ls></div>
                    <div class=ls2 id=ls2></div>
                </span>
            </li>
            <li>
                <span id=name></span>
            </li>
        </ul>
    </nav>
    <div class="container-fluid on-sidebar" id="content">
        <h1>Monte Carlo Integration</h1>
<p>Monte Carlo methods were some of the first methods I ever used for research, and when I learned about them, they seemed like some sort of magic.
Their premise is simple: random numbers can be used to integrate arbitrary shapes embedded into other objects.
Nowadays, "Monte Carlo" has become a bit of a catch-all term for methods that use random numbers to produce real results, but it all started as a straightforward method to integrate objects.
No matter how you slice it, the idea seems a bit crazy at first.
After all, random numbers are random.
How could they possibly be used to find non-random values?</p>
<p>Well, imagine you have a square.
The area of the square is simple, <script type='math/tex'>\text{Area}*{\text{square}} = \text{length} \times \text{width}</script>.
Since it's a square, the <script type='math/tex'>\text{length}</script> and <script type='math/tex'>\text{width}</script> are the same, so the formula is technically just <script type='math/tex'>\text{Area}*{\text{square}} = \text{length}^2</script>.
If we embed a circle into the square with a radius <script type='math/tex'>r = \tfrac{length}{2}</script> (shown below), then its area is <script type='math/tex'>\text{Area}*{\text{circle}}=\pi r^2</script>.
For simplicity, we can also say that <script type='math/tex'>\text{Area}*{\text{square}}=4r^2</script>.</p>
<p>
    <img  class="center" src="res/square_circle.png" width="300"/>
</p>

<p>Now, let's say we want to find the area of the circle without an equation.
As we said before, it's embedded in the square, so we should be able to find some ratio of the area of the square to the area of the circle:</p>
<p><script type='math/tex'>
\text{Ratio} = \frac{\text{Area}*{\text{circle}}}{\text{Area}*{\text{square}}}
</script></p>
<p>This means,</p>
<p><script type='math/tex'>
\text{Area}*{\text{circle}} = \text{Area}*{\text{square}}\times\text{Ratio} = 4r^2 \times \text{ratio}
</script></p>
<p>So, if we can find the <script type='math/tex'>\text{Ratio}</script> and we know <script type='math/tex'>r</script>, we should be able to easily find the <script type='math/tex'>\text{Area}_{\text{circle}}</script>.
The question is, "How do we easily find the <script type='math/tex'>\text{Ratio}</script>?"
Well, one way is with <em>random sampling</em>.
We basically just pick a bunch of points randomly in the square, and
each point is tested to see whether it's in the circle or not:</p>
<div class=code-section>
<div class="jl">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="n">function</span> <span class="n">in_circle</span><span class="p">(</span><span class="n">x_pos</span><span class="p">::</span><span class="n">Float64</span><span class="p">,</span> <span class="n">y_pos</span><span class="p">::</span><span class="n">Float64</span><span class="p">)</span>

    <span class="c1"># Setting radius to 1 for unit circle</span>
    <span class="n">radius</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">x_pos</span><span class="o">^</span><span class="mi">2</span> <span class="o">+</span> <span class="n">y_pos</span><span class="o">^</span><span class="mi">2</span> <span class="o">&lt;</span> <span class="n">radius</span><span class="o">^</span><span class="mi">2</span>
<span class="n">end</span>
</pre></div>

</div></p>
</div><div class="clj">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="p">(</span><span class="n">defn</span> <span class="ow">in</span><span class="o">-</span><span class="n">circle</span><span class="err">?</span> <span class="p">[</span><span class="n">pv</span> <span class="n">r</span><span class="p">]</span>
  <span class="s2">&quot;take a vector representing point and radius return true if the</span>
  <span class="n">point</span> <span class="ow">is</span> <span class="n">inside</span> <span class="n">the</span> <span class="n">circle</span><span class="s2">&quot;</span>
  <span class="p">(</span><span class="o">&lt;</span> <span class="p">(</span><span class="o">-&gt;&gt;</span>
      <span class="n">pv</span>
      <span class="p">(</span><span class="nb">map</span> <span class="c1">#(* % %))</span>
      <span class="p">(</span><span class="n">reduce</span> <span class="o">+</span><span class="p">))</span>
     <span class="p">(</span><span class="o">*</span> <span class="n">r</span> <span class="n">r</span><span class="p">)))</span>
</pre></div>

</div></p>
</div><div class="c">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="nb">bool</span> <span class="n">in_circle</span><span class="p">(</span><span class="n">double</span> <span class="n">x</span><span class="p">,</span> <span class="n">double</span> <span class="n">y</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">*</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

</div></p>
</div><div class="cpp">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="o">/**</span>
 <span class="o">*</span> <span class="n">Check</span> <span class="k">if</span> <span class="n">the</span> <span class="n">point</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="ow">is</span> <span class="n">within</span> <span class="n">a</span> <span class="n">circle</span> <span class="n">of</span> <span class="n">a</span> <span class="n">given</span> <span class="n">radius</span><span class="o">.</span>
 <span class="o">*</span> <span class="nd">@param</span> <span class="n">x</span> <span class="n">coordinate</span> <span class="n">one</span>
 <span class="o">*</span> <span class="nd">@param</span> <span class="n">y</span> <span class="n">coordinate</span> <span class="n">two</span>
 <span class="o">*</span> <span class="nd">@param</span> <span class="n">r</span> <span class="n">radius</span> <span class="n">of</span> <span class="n">the</span> <span class="n">circle</span> <span class="p">(</span><span class="n">optional</span><span class="p">)</span>
 <span class="o">*</span> <span class="nd">@return</span> <span class="n">true</span> <span class="k">if</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="ow">is</span> <span class="n">within</span> <span class="n">the</span> <span class="n">circle</span><span class="o">.</span>
 <span class="o">*/</span>
<span class="n">inline</span> <span class="nb">bool</span> <span class="n">in_circle</span><span class="p">(</span><span class="n">double</span> <span class="n">x</span><span class="p">,</span> <span class="n">double</span> <span class="n">y</span><span class="p">,</span> <span class="n">double</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">*</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">r</span> <span class="o">*</span> <span class="n">r</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

</div></p>
</div><div class="js">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="n">function</span> <span class="n">inCircle</span><span class="p">(</span><span class="n">xPos</span><span class="p">,</span> <span class="n">yPos</span><span class="p">)</span> <span class="p">{</span>
  <span class="o">//</span> <span class="n">Setting</span> <span class="n">radius</span> <span class="n">to</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">unit</span> <span class="n">circle</span>
  <span class="n">let</span> <span class="n">radius</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">xPos</span> <span class="o">*</span> <span class="n">xPos</span> <span class="o">+</span> <span class="n">yPos</span> <span class="o">*</span> <span class="n">yPos</span> <span class="o">&lt;</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">radius</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

</div></p>
</div><div class="hs">
<p><div class="codehilite">
<div class="highlight"><pre><span></span>        <span class="n">inCircle</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="n">x</span><span class="o">^</span><span class="mi">2</span> <span class="o">+</span> <span class="n">y</span><span class="o">^</span><span class="mi">2</span> <span class="o">&lt;</span> <span class="mi">1</span>
</pre></div>

</div></p>
</div><div class="rs">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="n">fn</span> <span class="n">in_circle</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">f64</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">f64</span><span class="p">,</span> <span class="n">radius</span><span class="p">:</span> <span class="n">f64</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span> <span class="p">{</span>
    <span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">*</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">radius</span>
<span class="p">}</span>
</pre></div>

</div></p>
</div><div class="d">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="nb">bool</span> <span class="n">inCircle</span><span class="p">(</span><span class="n">real</span> <span class="n">x</span><span class="p">,</span> <span class="n">real</span> <span class="n">y</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">^^</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">y</span> <span class="o">^^</span> <span class="mi">2</span> <span class="o">&lt;</span> <span class="mf">1.0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

</div></p>
</div><div class="go">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="n">func</span> <span class="n">inCircle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="n">float64</span><span class="p">)</span> <span class="nb">bool</span> <span class="p">{</span>
	<span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="o">*</span><span class="n">y</span> <span class="o">&lt;</span> <span class="mf">1.0</span> <span class="o">//</span> <span class="n">the</span> <span class="n">radius</span> <span class="n">of</span> <span class="n">an</span> <span class="n">unit</span> <span class="n">circle</span> <span class="ow">is</span> <span class="mf">1.0</span>
<span class="p">}</span>
</pre></div>

</div></p>
</div><div class="r">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="n">in_circle</span> <span class="o">&lt;-</span> <span class="n">function</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">radius</span> <span class="o">=</span> <span class="mi">1</span><span class="p">){</span>
        <span class="c1"># Return True if the point is in the circle and False otherwise.</span>
        <span class="k">return</span><span class="p">((</span><span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">*</span><span class="n">y</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">radius</span><span class="o">*</span><span class="n">radius</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>

</div></p>
</div><div class="java">
<p><div class="codehilite">
<div class="highlight"><pre><span></span>    <span class="n">private</span> <span class="n">static</span> <span class="n">boolean</span> <span class="n">inCircle</span><span class="p">(</span><span class="n">double</span> <span class="n">x</span><span class="p">,</span> <span class="n">double</span> <span class="n">y</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">*</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>

</div></p>
</div><div class="swift">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="n">func</span> <span class="n">inCircle</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">Double</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">Double</span><span class="p">,</span> <span class="n">radius</span><span class="p">:</span> <span class="n">Double</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Bool</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">y</span><span class="o">*</span><span class="n">y</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">radius</span><span class="o">*</span><span class="n">radius</span>
<span class="p">}</span>
</pre></div>

</div></p>
</div><div class="py">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">in_circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">radius</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot;Return True if the point is in the circle and False otherwise.&quot;&quot;&quot;</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">*</span><span class="n">y</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">radius</span><span class="o">*</span><span class="n">radius</span>
</pre></div>

</div></p>
</div><div class="cs">
<p><div class="codehilite">
<div class="highlight"><pre><span></span>        <span class="n">public</span> <span class="nb">bool</span> <span class="n">IsInMe</span><span class="p">(</span><span class="n">Point</span> <span class="n">point</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">Math</span><span class="o">.</span><span class="n">Pow</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">X</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">Math</span><span class="o">.</span><span class="n">Pow</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">Math</span><span class="o">.</span><span class="n">Pow</span><span class="p">(</span><span class="n">Radius</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</pre></div>

</div></p>
</div><div class="nim">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="n">proc</span> <span class="n">in_circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span> <span class="nb">bool</span> <span class="o">=</span>
  <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">*</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">radius</span>
</pre></div>

</div></p>
</div><div class="ruby">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">in_circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
  <span class="c1"># Check if coords are in circle via Pythagorean Thm</span>
  <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">*</span><span class="n">y</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">radius</span><span class="o">*</span><span class="n">radius</span>
<span class="n">end</span>
</pre></div>

</div></p>
</div><div class="f90">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="n">FUNCTION</span> <span class="n">in_circle</span><span class="p">(</span><span class="n">pos_x</span><span class="p">,</span> <span class="n">pos_y</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
    <span class="n">IMPLICIT</span> <span class="n">NONE</span>
    <span class="n">REAL</span><span class="p">(</span><span class="mi">16</span><span class="p">),</span> <span class="n">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span> <span class="p">::</span> <span class="n">pos_x</span><span class="p">,</span> <span class="n">pos_y</span><span class="p">,</span> <span class="n">r</span>
    <span class="n">LOGICAL</span>              <span class="p">::</span> <span class="n">in_circle</span>

    <span class="n">in_circle</span> <span class="o">=</span> <span class="p">(</span><span class="n">pos_x</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">pos_y</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">r</span> <span class="o">**</span> <span class="mi">2</span>

<span class="n">END</span> <span class="n">FUNCTION</span> <span class="n">in_circle</span> 
</pre></div>

</div></p>
</div><div class="factor">
<p><div class="codehilite">
<div class="highlight"><pre><span></span>  <span class="p">[</span> <span class="err">!</span> <span class="ow">in</span><span class="o">-</span><span class="n">circle</span> <span class="n">check</span>
    <span class="p">[</span> <span class="mi">2</span> <span class="o">^</span> <span class="p">]</span> <span class="n">bi</span><span class="o">@</span> <span class="o">+</span> <span class="err">!</span> <span class="n">get</span> <span class="n">the</span> <span class="n">distance</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">center</span>
    <span class="mi">1</span> <span class="o">&lt;</span>           <span class="err">!</span> <span class="n">see</span> <span class="k">if</span> <span class="n">it</span><span class="s1">&#39;s less than the radius</span>
  <span class="p">]</span>
</pre></div>

</div></p>
</div><div class="emojic">
<p><div class="codehilite">
<div class="highlight"><pre><span></span>  <span class="err">❗️</span> <span class="err">📥</span> <span class="n">point</span> <span class="err">☝️</span> <span class="err">➡️</span> <span class="err">👌</span> <span class="err">🍇</span>
    <span class="err">📪</span> <span class="n">point</span><span class="err">❗️</span> <span class="err">➡️</span> <span class="n">point_x</span>
    <span class="err">📫</span> <span class="n">point</span><span class="err">❗️</span> <span class="err">➡️</span> <span class="n">point_y</span>
    <span class="err">↩️</span> <span class="err">🤜</span><span class="n">point_x</span> <span class="err">✖️</span> <span class="n">point_x</span> <span class="err">➕</span> <span class="n">point_y</span> <span class="err">✖️</span> <span class="n">point_y</span><span class="err">🤛</span> <span class="err">◀️</span> <span class="err">🤜</span><span class="n">radius</span> <span class="err">✖️</span> <span class="n">radius</span><span class="err">🤛</span>
  <span class="err">🍉</span>
</pre></div>

</div></p>
</div><div class="php">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="n">function</span> <span class="n">in_circle</span><span class="p">(</span><span class="nb">float</span> <span class="err">$</span><span class="n">positionX</span><span class="p">,</span> <span class="nb">float</span> <span class="err">$</span><span class="n">positionY</span><span class="p">,</span> <span class="nb">float</span> <span class="err">$</span><span class="n">radius</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span> <span class="nb">bool</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="nb">pow</span><span class="p">(</span><span class="err">$</span><span class="n">positionX</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="nb">pow</span><span class="p">(</span><span class="err">$</span><span class="n">positionY</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">pow</span><span class="p">(</span><span class="err">$</span><span class="n">radius</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

</div></p>
</div><div class="lua">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="kd">local</span> <span class="kr">function</span> <span class="nf">in_circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
  <span class="kr">return</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">*</span><span class="n">y</span> <span class="o">&lt;=</span> <span class="mi">1</span>
<span class="kr">end</span>
</pre></div>

</div></p>
</div><div class="racket">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="p">(</span><span class="n">define</span> <span class="p">(</span><span class="n">in_circle</span> <span class="n">x</span> <span class="n">y</span><span class="p">)</span>
  <span class="p">(</span><span class="o">&lt;</span> <span class="p">(</span><span class="o">+</span> <span class="p">(</span><span class="n">sqr</span> <span class="n">x</span><span class="p">)</span> <span class="p">(</span><span class="n">sqr</span> <span class="n">y</span><span class="p">))</span> <span class="mi">1</span><span class="p">)</span>
 <span class="p">)</span>
</pre></div>

</div></p>
</div><div class="scala">
<p><div class="codehilite">
<div class="highlight"><pre><span></span>  <span class="k">def</span> <span class="nf">inCircle</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">Double</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">Double</span><span class="p">)</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">*</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">1</span>
</pre></div>

</div></p>
</div><div class="lisp">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="p">(</span><span class="n">defun</span> <span class="ow">in</span><span class="o">-</span><span class="n">circle</span><span class="o">-</span><span class="n">p</span> <span class="p">(</span><span class="n">x</span> <span class="n">y</span><span class="p">)</span>
  <span class="s2">&quot;Checks if a point is in a unit circle&quot;</span>
  <span class="p">(</span><span class="o">&lt;</span> <span class="p">(</span><span class="o">+</span> <span class="p">(</span><span class="o">*</span> <span class="n">x</span> <span class="n">x</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span> <span class="n">y</span> <span class="n">y</span><span class="p">))</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>

</div></p>
</div><div class="asm-x64">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="c1"># xmm0 - x</span>
<span class="c1"># xmm1 - y</span>
<span class="c1"># RET rax - bool</span>
<span class="n">in_circle</span><span class="p">:</span>
  <span class="n">mulsd</span>  <span class="n">xmm0</span><span class="p">,</span> <span class="n">xmm0</span>                  <span class="c1"># Calculate x * x + y * y</span>
  <span class="n">mulsd</span>  <span class="n">xmm1</span><span class="p">,</span> <span class="n">xmm1</span>
  <span class="n">addsd</span>  <span class="n">xmm0</span><span class="p">,</span> <span class="n">xmm1</span>
  <span class="n">movsd</span>  <span class="n">xmm1</span><span class="p">,</span> <span class="n">one</span>                   <span class="c1"># Set circle radius to 1</span>
  <span class="n">xor</span>    <span class="n">rax</span><span class="p">,</span> <span class="n">rax</span>
  <span class="n">comisd</span> <span class="n">xmm1</span><span class="p">,</span> <span class="n">xmm0</span>                  <span class="c1"># Return bool xmm0 &lt; xmm1</span>
  <span class="n">seta</span> <span class="n">al</span>
  <span class="n">ret</span>
</pre></div>

</div></p>
</div><div class="bash">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="n">inCircle</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">local</span> <span class="n">ret</span>
    <span class="n">local</span> <span class="n">mag</span>
    <span class="p">((</span><span class="n">ret</span> <span class="o">=</span> <span class="mi">0</span><span class="p">))</span>
    <span class="k">if</span> <span class="p">((</span><span class="err">$</span><span class="mi">1</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="err">$</span><span class="mi">2</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">&lt;</span> <span class="mi">1073676289</span><span class="p">));</span> <span class="n">then</span> <span class="c1"># 1073676289 = 32767 ** 2</span>
        <span class="p">((</span><span class="n">ret</span> <span class="o">=</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">fi</span>
    <span class="n">printf</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="err">$</span><span class="n">ret</span>
<span class="p">}</span>
</pre></div>

</div></p>
</div><div class="kotlin">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="n">private</span> <span class="n">fun</span> <span class="n">inCircle</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">Double</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">Double</span><span class="p">,</span> <span class="n">radius</span><span class="p">:</span> <span class="n">Double</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">*</span> <span class="n">y</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">radius</span>
</pre></div>

</div></p>
</div>
</div>

<p>If it's in the circle, we increase an internal count by one, and in the end,</p>
<p><script type='math/tex'>
\text{Ratio} = \frac{\text{count in circle}}{\text{total number of points used}}
</script></p>
<p>If we use a small number of points, this will only give us a rough approximation, but as we start adding more and more points, the approximation becomes much, much better (as shown below)!</p>
<p>
    <img  class="center" src="res/monte_carlo.gif" width="400"/>
</p>

<p>The true power of Monte Carlo comes from the fact that it can be used to integrate literally any object that can be embedded into the square.
As long as you can write some function to tell whether the provided point is inside the shape you want (like <code>in_circle()</code> in this case), you can use Monte Carlo integration!
This is obviously an incredibly powerful tool and has been used time and time again for many different areas of physics and engineering.
I can guarantee that we will see similar methods crop up all over the place in the future!</p>
<h2>Video Explanation</h2>
<p>Here is a video describing Monte Carlo integration:</p>
<div style="text-align:center">
<iframe width="560" height="315" src="https://www.youtube.com/embed/AyBNnkYrSWY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>

<h2>Example Code</h2>
<p>Monte Carlo methods are famous for their simplicity.
It doesn't take too many lines to get something simple going.
Here, we are just integrating a circle, like we described above; however, there is a small twist and trick.
Instead of calculating the area of the circle, we are instead trying to find the value of <script type='math/tex'>\pi</script>, and
rather than integrating the entire circle, we are only integrating the upper right quadrant of the circle from <script type='math/tex'>0 < x, y < 1</script>.
This saves a bit of computation time, but also requires us to multiply our output by <script type='math/tex'>4</script>.</p>
<p>That's all there is to it!
Feel free to submit your version via pull request, and thanks for reading!</p>
<div class=code-section>
<div class="jl">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="c1"># function to determine whether an x, y point is in the unit circle</span>
<span class="n">function</span> <span class="n">in_circle</span><span class="p">(</span><span class="n">x_pos</span><span class="p">::</span><span class="n">Float64</span><span class="p">,</span> <span class="n">y_pos</span><span class="p">::</span><span class="n">Float64</span><span class="p">)</span>

    <span class="c1"># Setting radius to 1 for unit circle</span>
    <span class="n">radius</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">x_pos</span><span class="o">^</span><span class="mi">2</span> <span class="o">+</span> <span class="n">y_pos</span><span class="o">^</span><span class="mi">2</span> <span class="o">&lt;</span> <span class="n">radius</span><span class="o">^</span><span class="mi">2</span>
<span class="n">end</span>

<span class="c1"># function to integrate a unit circle to find pi via monte_carlo</span>
<span class="n">function</span> <span class="n">monte_carlo</span><span class="p">(</span><span class="n">n</span><span class="p">::</span><span class="n">Int64</span><span class="p">)</span>

    <span class="n">pi_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">:</span><span class="n">n</span>
        <span class="n">point_x</span> <span class="o">=</span> <span class="n">rand</span><span class="p">()</span>
        <span class="n">point_y</span> <span class="o">=</span> <span class="n">rand</span><span class="p">()</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">in_circle</span><span class="p">(</span><span class="n">point_x</span><span class="p">,</span> <span class="n">point_y</span><span class="p">))</span>
            <span class="n">pi_count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">end</span>
    <span class="n">end</span>

    <span class="c1"># This is using a quarter of the unit sphere in a 1x1 box.</span>
    <span class="c1"># The formula is pi = (box_length^2 / radius^2) * (pi_count / n), but we</span>
    <span class="c1">#     are only using the upper quadrant and the unit circle, so we can use</span>
    <span class="c1">#     4*pi_count/n instead</span>
    <span class="n">pi_estimate</span> <span class="o">=</span> <span class="mi">4</span><span class="o">*</span><span class="n">pi_count</span><span class="o">/</span><span class="n">n</span>
    <span class="n">println</span><span class="p">(</span><span class="s2">&quot;The pi estimate is: &quot;</span><span class="p">,</span> <span class="n">pi_estimate</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="s2">&quot;Percent error is: &quot;</span><span class="p">,</span> <span class="n">signif</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">pi_estimate</span> <span class="o">-</span> <span class="n">pi</span><span class="p">)</span> <span class="o">/</span> <span class="n">pi</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="s2">&quot; %&quot;</span><span class="p">)</span>
<span class="n">end</span>

<span class="n">monte_carlo</span><span class="p">(</span><span class="mi">10000000</span><span class="p">)</span>
</pre></div>

</div></p>
</div><div class="clj">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="p">(</span><span class="n">ns</span> <span class="n">monte</span><span class="o">-</span><span class="n">carlo</span><span class="o">.</span><span class="n">core</span><span class="p">)</span>

<span class="p">(</span><span class="n">defn</span> <span class="ow">in</span><span class="o">-</span><span class="n">circle</span><span class="err">?</span> <span class="p">[</span><span class="n">pv</span> <span class="n">r</span><span class="p">]</span>
  <span class="s2">&quot;take a vector representing point and radius return true if the</span>
  <span class="n">point</span> <span class="ow">is</span> <span class="n">inside</span> <span class="n">the</span> <span class="n">circle</span><span class="s2">&quot;</span>
  <span class="p">(</span><span class="o">&lt;</span> <span class="p">(</span><span class="o">-&gt;&gt;</span>
      <span class="n">pv</span>
      <span class="p">(</span><span class="nb">map</span> <span class="c1">#(* % %))</span>
      <span class="p">(</span><span class="n">reduce</span> <span class="o">+</span><span class="p">))</span>
     <span class="p">(</span><span class="o">*</span> <span class="n">r</span> <span class="n">r</span><span class="p">)))</span>
<span class="p">(</span><span class="n">defn</span> <span class="n">rand</span><span class="o">-</span><span class="n">point</span> <span class="p">[</span><span class="n">r</span><span class="p">]</span>
  <span class="s2">&quot;return a random point from (0,0) inclusive to (r,r) exclusive&quot;</span>
  <span class="p">(</span><span class="n">repeatedly</span> <span class="mi">2</span> <span class="c1">#(rand r)))</span>
<span class="p">(</span><span class="n">defn</span> <span class="n">monte</span><span class="o">-</span><span class="n">carlo</span> <span class="p">[</span><span class="n">n</span> <span class="n">r</span><span class="p">]</span>
  <span class="s2">&quot;take the number of random points and radius return an estimate to</span>
<span class="n">pi</span><span class="s2">&quot;</span>
  <span class="p">(</span><span class="o">*</span><span class="s1">&#39; 4 (/ n)</span>
      <span class="p">(</span><span class="n">loop</span> <span class="p">[</span><span class="n">i</span> <span class="n">n</span> <span class="n">count</span> <span class="mi">0</span><span class="p">]</span>
        <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="n">zero</span><span class="err">?</span> <span class="n">i</span><span class="p">)</span>
          <span class="n">count</span>
          <span class="p">(</span><span class="n">recur</span> <span class="p">(</span><span class="n">dec</span> <span class="n">i</span><span class="p">)</span>
                 <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="ow">in</span><span class="o">-</span><span class="n">circle</span><span class="err">?</span> <span class="p">(</span><span class="n">rand</span><span class="o">-</span><span class="n">point</span> <span class="n">r</span><span class="p">)</span> <span class="n">r</span><span class="p">)</span>
                   <span class="p">(</span><span class="n">inc</span> <span class="n">count</span><span class="p">)</span>
                   <span class="n">count</span><span class="p">))))))</span>
<span class="p">(</span><span class="n">defn</span> <span class="o">-</span><span class="n">main</span> <span class="p">[]</span>
  <span class="p">(</span><span class="n">let</span> <span class="p">[</span><span class="n">constant</span><span class="o">-</span><span class="n">pi</span> <span class="n">Math</span><span class="o">/</span><span class="n">PI</span>
        <span class="n">computed</span><span class="o">-</span><span class="n">pi</span> <span class="p">(</span><span class="n">monte</span><span class="o">-</span><span class="n">carlo</span> <span class="mi">10000000</span> <span class="mi">2</span><span class="p">)</span> <span class="p">;;</span> <span class="n">this</span> <span class="n">may</span> <span class="n">take</span> <span class="n">some</span> <span class="n">time</span> <span class="n">on</span> <span class="n">lower</span> <span class="n">end</span> <span class="n">machines</span>
        <span class="n">difference</span> <span class="p">(</span><span class="n">Math</span><span class="o">/</span><span class="nb">abs</span> <span class="p">(</span><span class="o">-</span> <span class="n">constant</span><span class="o">-</span><span class="n">pi</span> <span class="n">computed</span><span class="o">-</span><span class="n">pi</span><span class="p">))</span>
        <span class="n">error</span> <span class="p">(</span><span class="o">*</span> <span class="mi">100</span> <span class="p">(</span><span class="o">/</span> <span class="n">difference</span> <span class="n">constant</span><span class="o">-</span><span class="n">pi</span><span class="p">))]</span>
    <span class="p">(</span><span class="n">println</span> <span class="s2">&quot;world&#39;s PI: &quot;</span> <span class="n">constant</span><span class="o">-</span><span class="n">pi</span>
             <span class="s2">&quot;,our PI: &quot;</span>    <span class="p">(</span><span class="n">double</span> <span class="n">computed</span><span class="o">-</span><span class="n">pi</span><span class="p">)</span>
             <span class="s2">&quot;,error: &quot;</span> <span class="n">error</span><span class="p">)))</span>
</pre></div>

</div></p>
</div><div class="c">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="c1">#include &lt;math.h&gt;</span>
<span class="c1">#include &lt;stdio.h&gt;</span>
<span class="c1">#include &lt;stdbool.h&gt;</span>
<span class="c1">#include &lt;stdlib.h&gt;</span>
<span class="c1">#include &lt;time.h&gt;</span>

<span class="nb">bool</span> <span class="n">in_circle</span><span class="p">(</span><span class="n">double</span> <span class="n">x</span><span class="p">,</span> <span class="n">double</span> <span class="n">y</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">*</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">double</span> <span class="n">monte_carlo</span><span class="p">(</span><span class="n">unsigned</span> <span class="nb">int</span> <span class="n">samples</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">unsigned</span> <span class="nb">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="n">unsigned</span> <span class="nb">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">samples</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">double</span> <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="n">double</span><span class="p">)</span><span class="n">rand</span><span class="p">()</span> <span class="o">/</span> <span class="n">RAND_MAX</span><span class="p">;</span>
        <span class="n">double</span> <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">double</span><span class="p">)</span><span class="n">rand</span><span class="p">()</span> <span class="o">/</span> <span class="n">RAND_MAX</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">in_circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span> <span class="p">{</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mf">4.0</span> <span class="o">*</span> <span class="n">count</span> <span class="o">/</span> <span class="n">samples</span><span class="p">;</span>
<span class="p">}</span>

<span class="nb">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">srand</span><span class="p">(</span><span class="n">time</span><span class="p">(</span><span class="n">NULL</span><span class="p">));</span>

    <span class="n">double</span> <span class="n">estimate</span> <span class="o">=</span> <span class="n">monte_carlo</span><span class="p">(</span><span class="mi">1000000</span><span class="p">);</span>

    <span class="n">printf</span><span class="p">(</span><span class="s2">&quot;The estimate of pi is </span><span class="si">%g</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">estimate</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s2">&quot;Percentage error: </span><span class="si">%0.2f%%</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">fabs</span><span class="p">(</span><span class="n">M_PI</span> <span class="o">-</span> <span class="n">estimate</span><span class="p">)</span> <span class="o">/</span> <span class="n">M_PI</span><span class="p">);</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

</div></p>
</div><div class="cpp">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="c1">#include &lt;iostream&gt;</span>
<span class="c1">#include &lt;cstdlib&gt;</span>
<span class="c1">#include &lt;random&gt;</span>

<span class="n">constexpr</span> <span class="n">double</span> <span class="n">PI</span> <span class="o">=</span> <span class="mf">3.14159265358979323846264338</span><span class="p">;</span>

<span class="o">/**</span>
 <span class="o">*</span> <span class="n">Check</span> <span class="k">if</span> <span class="n">the</span> <span class="n">point</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="ow">is</span> <span class="n">within</span> <span class="n">a</span> <span class="n">circle</span> <span class="n">of</span> <span class="n">a</span> <span class="n">given</span> <span class="n">radius</span><span class="o">.</span>
 <span class="o">*</span> <span class="nd">@param</span> <span class="n">x</span> <span class="n">coordinate</span> <span class="n">one</span>
 <span class="o">*</span> <span class="nd">@param</span> <span class="n">y</span> <span class="n">coordinate</span> <span class="n">two</span>
 <span class="o">*</span> <span class="nd">@param</span> <span class="n">r</span> <span class="n">radius</span> <span class="n">of</span> <span class="n">the</span> <span class="n">circle</span> <span class="p">(</span><span class="n">optional</span><span class="p">)</span>
 <span class="o">*</span> <span class="nd">@return</span> <span class="n">true</span> <span class="k">if</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="ow">is</span> <span class="n">within</span> <span class="n">the</span> <span class="n">circle</span><span class="o">.</span>
 <span class="o">*/</span>
<span class="n">inline</span> <span class="nb">bool</span> <span class="n">in_circle</span><span class="p">(</span><span class="n">double</span> <span class="n">x</span><span class="p">,</span> <span class="n">double</span> <span class="n">y</span><span class="p">,</span> <span class="n">double</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">*</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">r</span> <span class="o">*</span> <span class="n">r</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">/**</span>
 <span class="o">*</span> <span class="n">Return</span> <span class="n">an</span> <span class="n">estimate</span> <span class="n">of</span> <span class="n">PI</span> <span class="n">using</span> <span class="n">Monte</span> <span class="n">Carlo</span> <span class="n">integration</span><span class="o">.</span>
 <span class="o">*</span> <span class="nd">@param</span> <span class="n">samples</span> <span class="n">number</span> <span class="n">of</span> <span class="n">iterations</span> <span class="n">to</span> <span class="n">use</span>
 <span class="o">*</span> <span class="nd">@return</span> <span class="n">estimate</span> <span class="n">of</span> <span class="n">pi</span>
 <span class="o">*/</span>
<span class="n">double</span> <span class="n">monte_carlo_pi</span><span class="p">(</span><span class="n">unsigned</span> <span class="n">samples</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">static</span> <span class="n">std</span><span class="p">::</span><span class="n">default_random_engine</span> <span class="n">generator</span><span class="p">;</span>
    <span class="n">static</span> <span class="n">std</span><span class="p">::</span><span class="n">uniform_real_distribution</span><span class="o">&lt;</span><span class="n">double</span><span class="o">&gt;</span> <span class="n">dist</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

    <span class="n">unsigned</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">unsigned</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">samples</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">double</span> <span class="n">x</span> <span class="o">=</span> <span class="n">dist</span><span class="p">(</span><span class="n">generator</span><span class="p">);</span>
        <span class="n">double</span> <span class="n">y</span> <span class="o">=</span> <span class="n">dist</span><span class="p">(</span><span class="n">generator</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">in_circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
            <span class="o">++</span><span class="n">count</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mf">4.0</span> <span class="o">*</span> <span class="n">count</span> <span class="o">/</span> <span class="n">samples</span><span class="p">;</span>
<span class="p">}</span>

<span class="nb">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">unsigned</span> <span class="n">samples</span><span class="p">;</span>

    <span class="n">std</span><span class="p">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;Enter samples to use: &quot;</span><span class="p">;</span>
    <span class="n">std</span><span class="p">::</span><span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">samples</span><span class="p">;</span>

    <span class="n">double</span> <span class="n">pi_estimate</span> <span class="o">=</span> <span class="n">monte_carlo_pi</span><span class="p">(</span><span class="n">samples</span><span class="p">);</span>
    <span class="n">std</span><span class="p">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;Pi = &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">pi_estimate</span> <span class="o">&lt;&lt;</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">;</span>
    <span class="n">std</span><span class="p">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;Percent error is: &quot;</span> <span class="o">&lt;&lt;</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">std</span><span class="p">::</span><span class="nb">abs</span><span class="p">(</span><span class="n">pi_estimate</span> <span class="o">-</span> <span class="n">PI</span><span class="p">)</span> <span class="o">/</span> <span class="n">PI</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot; %</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

</div></p>
</div><div class="js">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">submitted</span> <span class="n">by</span> <span class="n">xam4lor</span>
<span class="n">function</span> <span class="n">inCircle</span><span class="p">(</span><span class="n">xPos</span><span class="p">,</span> <span class="n">yPos</span><span class="p">)</span> <span class="p">{</span>
  <span class="o">//</span> <span class="n">Setting</span> <span class="n">radius</span> <span class="n">to</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">unit</span> <span class="n">circle</span>
  <span class="n">let</span> <span class="n">radius</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">xPos</span> <span class="o">*</span> <span class="n">xPos</span> <span class="o">+</span> <span class="n">yPos</span> <span class="o">*</span> <span class="n">yPos</span> <span class="o">&lt;</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">radius</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">function</span> <span class="n">monteCarlo</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">let</span> <span class="n">piCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span><span class="n">let</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">const</span> <span class="n">pointX</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="n">random</span><span class="p">();</span>
    <span class="n">const</span> <span class="n">pointY</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="n">random</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">inCircle</span><span class="p">(</span><span class="n">pointX</span><span class="p">,</span> <span class="n">pointY</span><span class="p">))</span> <span class="p">{</span>
      <span class="n">piCount</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="o">//</span> <span class="n">This</span> <span class="ow">is</span> <span class="n">using</span> <span class="n">a</span> <span class="n">quarter</span> <span class="n">of</span> <span class="n">the</span> <span class="n">unit</span> <span class="n">sphere</span> <span class="ow">in</span> <span class="n">a</span> <span class="mi">1</span><span class="n">x1</span> <span class="n">box</span><span class="o">.</span>
  <span class="o">//</span> <span class="n">The</span> <span class="n">formula</span> <span class="ow">is</span> <span class="n">pi</span> <span class="o">=</span> <span class="p">(</span><span class="n">boxLength</span><span class="o">^</span><span class="mi">2</span> <span class="o">/</span> <span class="n">radius</span><span class="o">^</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">piCount</span> <span class="o">/</span> <span class="n">n</span><span class="p">),</span> <span class="n">but</span> <span class="n">we</span>
  <span class="o">//</span> <span class="n">are</span> <span class="n">only</span> <span class="n">using</span> <span class="n">the</span> <span class="n">upper</span> <span class="n">quadrant</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">unit</span> <span class="n">circle</span><span class="p">,</span> <span class="n">so</span> <span class="n">we</span> <span class="n">can</span> <span class="n">use</span>
  <span class="o">//</span> <span class="mi">4</span><span class="o">*</span><span class="n">piCount</span><span class="o">/</span><span class="n">n</span> <span class="n">instead</span>
  <span class="o">//</span> <span class="n">piEstimate</span> <span class="o">=</span> <span class="mi">4</span><span class="o">*</span><span class="n">piCount</span><span class="o">/</span><span class="n">n</span>
  <span class="n">const</span> <span class="n">piEstimate</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">piCount</span> <span class="o">/</span> <span class="n">n</span><span class="p">;</span>
  <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;Percent error is: </span><span class="si">%s</span><span class="s1">%&#39;</span><span class="p">,</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">Math</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">piEstimate</span> <span class="o">-</span> <span class="n">Math</span><span class="o">.</span><span class="n">PI</span><span class="p">)</span> <span class="o">/</span> <span class="n">Math</span><span class="o">.</span><span class="n">PI</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">monteCarlo</span><span class="p">(</span><span class="mi">100000000</span><span class="p">);</span>
</pre></div>

</div></p>
</div><div class="hs">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">System.Random</span>

<span class="n">monteCarloPi</span> <span class="p">::</span> <span class="n">RandomGen</span> <span class="n">g</span> <span class="o">=&gt;</span> <span class="n">g</span> <span class="o">-&gt;</span> <span class="n">Int</span> <span class="o">-&gt;</span> <span class="n">Float</span>
<span class="n">monteCarloPi</span> <span class="n">g</span> <span class="n">n</span> <span class="o">=</span> <span class="n">count</span> <span class="err">$</span> <span class="nb">filter</span> <span class="n">inCircle</span> <span class="err">$</span> <span class="n">makePairs</span>
  <span class="n">where</span> <span class="n">makePairs</span> <span class="o">=</span> <span class="n">take</span> <span class="n">n</span> <span class="err">$</span> <span class="n">toPair</span> <span class="p">(</span><span class="n">randomRs</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="n">g</span> <span class="p">::</span> <span class="p">[</span><span class="n">Float</span><span class="p">])</span>
        <span class="n">toPair</span> <span class="p">(</span><span class="n">x</span><span class="p">:</span><span class="n">y</span><span class="p">:</span><span class="n">rest</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="p">:</span> <span class="n">toPair</span> <span class="n">rest</span>
        <span class="n">inCircle</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="n">x</span><span class="o">^</span><span class="mi">2</span> <span class="o">+</span> <span class="n">y</span><span class="o">^</span><span class="mi">2</span> <span class="o">&lt;</span> <span class="mi">1</span>
        <span class="n">count</span> <span class="n">l</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">fromIntegral</span> <span class="p">(</span><span class="n">length</span> <span class="n">l</span><span class="p">)</span> <span class="o">/</span> <span class="n">fromIntegral</span> <span class="n">n</span>

<span class="n">main</span> <span class="o">=</span> <span class="n">do</span>
  <span class="n">g</span> <span class="o">&lt;-</span> <span class="n">newStdGen</span>
  <span class="n">let</span> <span class="n">p</span> <span class="o">=</span> <span class="n">monteCarloPi</span> <span class="n">g</span> <span class="mi">100000</span>
  <span class="n">putStrLn</span> <span class="err">$</span> <span class="s2">&quot;Estimated pi: &quot;</span> <span class="o">++</span> <span class="n">show</span> <span class="n">p</span>
  <span class="n">putStrLn</span> <span class="err">$</span> <span class="s2">&quot;Percent error: &quot;</span> <span class="o">++</span> <span class="n">show</span> <span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="nb">abs</span> <span class="p">(</span><span class="n">pi</span> <span class="o">-</span> <span class="n">p</span><span class="p">)</span> <span class="o">/</span> <span class="n">pi</span><span class="p">)</span>
</pre></div>

</div>
{%sample lang="rs" </p>
</div><div class="java">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.Random</span><span class="p">;</span>

<span class="n">public</span> <span class="k">class</span> <span class="nc">MonteCarlo</span> <span class="p">{</span>

    <span class="n">public</span> <span class="n">static</span> <span class="n">void</span> <span class="n">main</span><span class="p">(</span><span class="n">String</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">double</span> <span class="n">piEstimation</span> <span class="o">=</span> <span class="n">monteCarlo</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
        <span class="n">System</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">println</span><span class="p">(</span><span class="s2">&quot;Estimated pi value: &quot;</span> <span class="o">+</span> <span class="n">piEstimation</span><span class="p">);</span>
        <span class="n">System</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">printf</span><span class="p">(</span><span class="s2">&quot;Percent error: &quot;</span> <span class="o">+</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">Math</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">piEstimation</span> <span class="o">-</span> <span class="n">Math</span><span class="o">.</span><span class="n">PI</span><span class="p">)</span> <span class="o">/</span> <span class="n">Math</span><span class="o">.</span><span class="n">PI</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="o">//</span> <span class="n">function</span> <span class="n">to</span> <span class="n">check</span> <span class="n">whether</span> <span class="n">point</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">in</span> <span class="n">unit</span> <span class="n">circle</span>
    <span class="n">private</span> <span class="n">static</span> <span class="n">boolean</span> <span class="n">inCircle</span><span class="p">(</span><span class="n">double</span> <span class="n">x</span><span class="p">,</span> <span class="n">double</span> <span class="n">y</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">*</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">//</span> <span class="n">function</span> <span class="n">to</span> <span class="n">calculate</span> <span class="n">estimation</span> <span class="n">of</span> <span class="n">pi</span>
    <span class="n">public</span> <span class="n">static</span> <span class="n">double</span> <span class="n">monteCarlo</span><span class="p">(</span><span class="nb">int</span> <span class="n">samples</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">int</span> <span class="n">piCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

        <span class="n">Random</span> <span class="n">random</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Random</span><span class="p">();</span>

        <span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">samples</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">double</span> <span class="n">x</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">nextDouble</span><span class="p">();</span>
            <span class="n">double</span> <span class="n">y</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">nextDouble</span><span class="p">();</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">inCircle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span> <span class="p">{</span>
                <span class="n">piCount</span><span class="o">++</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="mf">4.0</span> <span class="o">*</span> <span class="n">piCount</span> <span class="o">/</span> <span class="n">samples</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

</div></p>
</div><div class="swift">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="n">func</span> <span class="n">inCircle</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">Double</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">Double</span><span class="p">,</span> <span class="n">radius</span><span class="p">:</span> <span class="n">Double</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Bool</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">y</span><span class="o">*</span><span class="n">y</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">radius</span><span class="o">*</span><span class="n">radius</span>
<span class="p">}</span>

<span class="n">func</span> <span class="n">monteCarlo</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="n">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Double</span> <span class="p">{</span>
    <span class="n">let</span> <span class="n">radius</span><span class="p">:</span> <span class="n">Double</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">var</span> <span class="n">piCount</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">var</span> <span class="n">randX</span><span class="p">:</span> <span class="n">Double</span>
    <span class="n">var</span> <span class="n">randY</span><span class="p">:</span> <span class="n">Double</span>

    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="mf">0.</span><span class="o">..</span><span class="n">n</span> <span class="p">{</span>
        <span class="n">randX</span> <span class="o">=</span> <span class="n">Double</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="ow">in</span><span class="p">:</span> <span class="mf">0.</span><span class="o">.&lt;</span><span class="n">radius</span><span class="p">)</span>
        <span class="n">randY</span> <span class="o">=</span> <span class="n">Double</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="ow">in</span><span class="p">:</span> <span class="mf">0.</span><span class="o">.&lt;</span><span class="n">radius</span><span class="p">)</span>

        <span class="k">if</span><span class="p">(</span><span class="n">inCircle</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">randX</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">randY</span><span class="p">,</span> <span class="n">radius</span><span class="p">:</span> <span class="n">radius</span><span class="p">))</span> <span class="p">{</span>
            <span class="n">piCount</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">let</span> <span class="n">piEstimate</span> <span class="o">=</span> <span class="n">Double</span><span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">piCount</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">Double</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">piEstimate</span>
<span class="p">}</span>

<span class="n">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">let</span> <span class="n">piEstimate</span> <span class="o">=</span> <span class="n">monteCarlo</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="mi">10000</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Pi estimate is: &quot;</span><span class="p">,</span> <span class="n">piEstimate</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Percent error is: \(100 * abs(piEstimate - Double.pi)/Double.pi)%&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">main</span><span class="p">()</span>
</pre></div>

</div></p>
</div><div class="py">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">random</span>


<span class="k">def</span> <span class="nf">in_circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">radius</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot;Return True if the point is in the circle and False otherwise.&quot;&quot;&quot;</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">*</span><span class="n">y</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">radius</span><span class="o">*</span><span class="n">radius</span>

<span class="k">def</span> <span class="nf">monte_carlo</span><span class="p">(</span><span class="n">n_samples</span><span class="p">,</span> <span class="n">radius</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot;Return the estimate of pi using the monte carlo algorithm.&quot;&quot;&quot;</span>
	<span class="n">in_circle_count</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_samples</span><span class="p">):</span>
		
		<span class="c1"># Sample x, y from the uniform distribution</span>
		<span class="n">x</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">radius</span><span class="p">)</span>
		<span class="n">y</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">radius</span><span class="p">)</span>
		
		<span class="c1"># Count the number of points inside the circle</span>
		<span class="k">if</span><span class="p">(</span><span class="n">in_circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">radius</span><span class="p">)):</span>
			<span class="n">in_circle_count</span> <span class="o">+=</span> <span class="mi">1</span>

	<span class="c1"># Since we&#39;ve generated points in upper left quadrant ([0,radius], [0, radius])</span>
	<span class="c1"># We need to multiply the number of points by 4	</span>
	<span class="n">pi_estimate</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">in_circle_count</span> <span class="o">/</span> <span class="p">(</span><span class="n">n_samples</span><span class="p">)</span>

	<span class="k">return</span> <span class="n">pi_estimate</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>

	<span class="n">pi_estimate</span> <span class="o">=</span> <span class="n">monte_carlo</span><span class="p">(</span><span class="mi">100000</span><span class="p">)</span>
	<span class="n">percent_error</span> <span class="o">=</span> <span class="mi">100</span><span class="o">*</span><span class="nb">abs</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">-</span> <span class="n">pi_estimate</span><span class="p">)</span><span class="o">/</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span>

	<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The estimate of pi is: </span><span class="si">{:.3f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pi_estimate</span><span class="p">))</span>
	<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The percent error is: </span><span class="si">{:.3f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">percent_error</span><span class="p">))</span>
</pre></div>

</div></p>
</div><div class="cs">
<h5>MonteCarlo.cs</h5>
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="n">using</span> <span class="n">System</span><span class="p">;</span>

<span class="n">namespace</span> <span class="n">MonteCarloIntegration</span>
<span class="p">{</span>
    <span class="n">public</span> <span class="k">class</span> <span class="nc">MonteCarlo</span>
    <span class="p">{</span>
        <span class="n">public</span> <span class="n">double</span> <span class="n">Run</span><span class="p">(</span><span class="nb">int</span> <span class="n">samples</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">var</span> <span class="n">circle</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Circle</span><span class="p">(</span><span class="mf">1.0</span><span class="p">);</span>
            <span class="n">var</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="n">var</span> <span class="n">random</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Random</span><span class="p">();</span>

            <span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">samples</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">var</span> <span class="n">point</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Point</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">NextDouble</span><span class="p">(),</span> <span class="n">random</span><span class="o">.</span><span class="n">NextDouble</span><span class="p">());</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">circle</span><span class="o">.</span><span class="n">IsInMe</span><span class="p">(</span><span class="n">point</span><span class="p">))</span>
                    <span class="n">count</span><span class="o">++</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="mf">4.0</span> <span class="o">*</span> <span class="n">count</span> <span class="o">/</span> <span class="n">samples</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

</div></p>
<h5>Circle.cs</h5>
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="n">using</span> <span class="n">System</span><span class="p">;</span>

<span class="n">namespace</span> <span class="n">MonteCarloIntegration</span>
<span class="p">{</span>
    <span class="n">public</span> <span class="n">struct</span> <span class="n">Point</span>
    <span class="p">{</span>
        <span class="n">public</span> <span class="n">double</span> <span class="n">X</span> <span class="p">{</span> <span class="n">get</span><span class="p">;</span> <span class="nb">set</span><span class="p">;</span> <span class="p">}</span>
        <span class="n">public</span> <span class="n">double</span> <span class="n">Y</span> <span class="p">{</span> <span class="n">get</span><span class="p">;</span> <span class="nb">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="n">public</span> <span class="n">Point</span><span class="p">(</span><span class="n">double</span> <span class="n">x</span><span class="p">,</span> <span class="n">double</span> <span class="n">y</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">this</span><span class="o">.</span><span class="n">X</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
            <span class="n">this</span><span class="o">.</span><span class="n">Y</span> <span class="o">=</span> <span class="n">y</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">public</span> <span class="k">class</span> <span class="nc">Circle</span>
    <span class="p">{</span>
        <span class="n">public</span> <span class="n">double</span> <span class="n">Radius</span> <span class="p">{</span> <span class="n">get</span><span class="p">;</span> <span class="n">private</span> <span class="nb">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="n">public</span> <span class="n">Circle</span><span class="p">(</span><span class="n">double</span> <span class="n">radius</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">this</span><span class="o">.</span><span class="n">Radius</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="n">Abs</span><span class="p">(</span><span class="n">radius</span><span class="p">);</span>

        <span class="n">public</span> <span class="nb">bool</span> <span class="n">IsInMe</span><span class="p">(</span><span class="n">Point</span> <span class="n">point</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">Math</span><span class="o">.</span><span class="n">Pow</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">X</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">Math</span><span class="o">.</span><span class="n">Pow</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">Math</span><span class="o">.</span><span class="n">Pow</span><span class="p">(</span><span class="n">Radius</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

</div></p>
<h5>Program.cs</h5>
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="n">using</span> <span class="n">System</span><span class="p">;</span>

<span class="n">namespace</span> <span class="n">MonteCarloIntegration</span>
<span class="p">{</span>
    <span class="k">class</span> <span class="nc">Program</span>
    <span class="p">{</span>
        <span class="n">static</span> <span class="n">void</span> <span class="n">Main</span><span class="p">(</span><span class="n">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">var</span> <span class="n">monteCarlo</span> <span class="o">=</span> <span class="n">new</span> <span class="n">MonteCarlo</span><span class="p">();</span>
            <span class="n">System</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s2">&quot;Running with 10,000,000 samples.&quot;</span><span class="p">);</span>
            <span class="n">var</span> <span class="n">piEstimate</span> <span class="o">=</span> <span class="n">monteCarlo</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="mi">10000000</span><span class="p">);</span>
            <span class="n">System</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="err">$</span><span class="s2">&quot;The estimate of pi is: </span><span class="si">{piEstimate}</span><span class="s2">&quot;</span><span class="p">);</span>
            <span class="n">System</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="err">$</span><span class="s2">&quot;The percent error is: {Math.Abs(piEstimate - Math.PI) / Math.PI * 100}%&quot;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

</div></p>
</div><div class="nim">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="n">randomize</span><span class="p">()</span>

<span class="n">proc</span> <span class="n">in_circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span> <span class="nb">bool</span> <span class="o">=</span>
  <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">*</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">radius</span>

<span class="n">proc</span> <span class="n">monte_carlo</span><span class="p">(</span><span class="n">samples</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span> <span class="nb">float</span> <span class="o">=</span>
  <span class="n">const</span> <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span>
  <span class="n">var</span> <span class="n">count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>

  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="mi">0</span> <span class="o">..</span> <span class="o">&lt;</span> <span class="n">samples</span><span class="p">:</span>
    <span class="n">let</span>
      <span class="n">x</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">random</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span>
      <span class="n">y</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">random</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span>
        
    <span class="k">if</span> <span class="n">in_circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">radius</span><span class="p">):</span>
      <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
    
  <span class="n">let</span> <span class="n">pi_estimate</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">count</span> <span class="o">/</span> <span class="n">samples</span>
  <span class="k">return</span> <span class="n">pi_estimate</span>

<span class="n">let</span> <span class="n">estimate</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">monte_carlo</span><span class="p">(</span><span class="mi">1000000</span><span class="p">)</span>

<span class="n">echo</span> <span class="s2">&quot;the estimate of pi is &quot;</span><span class="p">,</span> <span class="n">estimate</span>
<span class="n">echo</span> <span class="s2">&quot;percent error: &quot;</span><span class="p">,</span> <span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">estimate</span> <span class="o">-</span> <span class="n">PI</span><span class="p">)</span><span class="o">/</span><span class="n">PI</span><span class="p">)</span>
</pre></div>

</div></p>
</div><div class="ruby">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">in_circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
  <span class="c1"># Check if coords are in circle via Pythagorean Thm</span>
  <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">*</span><span class="n">y</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">radius</span><span class="o">*</span><span class="n">radius</span>
<span class="n">end</span>

<span class="k">def</span> <span class="nf">monte_carlo</span><span class="p">(</span><span class="n">n_samples</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
  <span class="c1"># estimate pi via monte carlo sampling</span>
  <span class="n">in_circle_count</span> <span class="o">=</span> <span class="mf">0.0</span>
  
  <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="mf">0.</span><span class="o">..</span><span class="n">n_samples</span>
    <span class="c1"># randomly choose coords within square</span>
	<span class="n">x</span> <span class="o">=</span> <span class="n">rand</span><span class="p">()</span><span class="o">*</span><span class="n">radius</span>
	<span class="n">y</span> <span class="o">=</span> <span class="n">rand</span><span class="p">()</span><span class="o">*</span><span class="n">radius</span>
	<span class="k">if</span> <span class="n">in_circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">radius</span><span class="p">)</span>
	  <span class="n">in_circle_count</span> <span class="o">+=</span> <span class="mi">1</span>
	<span class="n">end</span>
  <span class="n">end</span>
  
  <span class="c1"># circle area is pi*r^2 and rect area is 4r^2</span>
  <span class="c1"># ratio between the two is then pi/4 so multiply by 4 to get pi</span>
  <span class="k">return</span> <span class="mi">4</span> <span class="o">*</span> <span class="p">(</span><span class="n">in_circle_count</span> <span class="o">/</span> <span class="n">n_samples</span><span class="p">)</span>
  
<span class="n">end</span>


<span class="c1"># Main</span>
<span class="n">pi_estimate</span> <span class="o">=</span> <span class="n">monte_carlo</span><span class="p">(</span><span class="mi">100000</span><span class="p">)</span>
<span class="n">percent_error</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="n">pi_estimate</span> <span class="o">-</span> <span class="n">Math</span><span class="p">::</span><span class="n">PI</span><span class="p">)</span><span class="o">.</span><span class="n">abs</span> <span class="o">/</span> <span class="n">Math</span><span class="p">::</span><span class="n">PI</span>

<span class="n">puts</span> <span class="s2">&quot;The estimate of pi is: #{pi_estimate.round(3)}&quot;</span>
<span class="n">puts</span> <span class="s2">&quot;The percent error is: #{percent_error.round(3)}&quot;</span>
</pre></div>

</div></p>
</div><div class="f90">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="n">FUNCTION</span> <span class="n">in_circle</span><span class="p">(</span><span class="n">pos_x</span><span class="p">,</span> <span class="n">pos_y</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
    <span class="n">IMPLICIT</span> <span class="n">NONE</span>
    <span class="n">REAL</span><span class="p">(</span><span class="mi">16</span><span class="p">),</span> <span class="n">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span> <span class="p">::</span> <span class="n">pos_x</span><span class="p">,</span> <span class="n">pos_y</span><span class="p">,</span> <span class="n">r</span>
    <span class="n">LOGICAL</span>              <span class="p">::</span> <span class="n">in_circle</span>

    <span class="n">in_circle</span> <span class="o">=</span> <span class="p">(</span><span class="n">pos_x</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">pos_y</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">r</span> <span class="o">**</span> <span class="mi">2</span>

<span class="n">END</span> <span class="n">FUNCTION</span> <span class="n">in_circle</span> 

<span class="n">PROGRAM</span> <span class="n">monte_carlo</span>
    
    <span class="n">IMPLICIT</span> <span class="n">NONE</span>
    
    <span class="n">INTERFACE</span>
        <span class="n">FUNCTION</span> <span class="n">in_circle</span><span class="p">(</span><span class="n">pos_x</span><span class="p">,</span> <span class="n">pos_y</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span> 
            <span class="n">IMPLICIT</span> <span class="n">NONE</span>
            <span class="n">REAL</span><span class="p">(</span><span class="mi">16</span><span class="p">),</span> <span class="n">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span> <span class="p">::</span> <span class="n">pos_x</span><span class="p">,</span> <span class="n">pos_y</span><span class="p">,</span> <span class="n">r</span>
            <span class="n">LOGICAL</span>              <span class="p">::</span> <span class="n">in_circle</span>
        <span class="n">END</span> <span class="n">FUNCTION</span> <span class="n">in_circle</span> 
    <span class="n">END</span> <span class="n">INTERFACE</span>
    
    <span class="n">INTEGER</span>  <span class="p">::</span> <span class="n">i</span><span class="p">,</span><span class="n">n</span>
    <span class="n">REAL</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span> <span class="p">::</span> <span class="n">pos_x</span><span class="p">,</span><span class="n">pos_y</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">pi_est</span><span class="p">,</span> <span class="n">pi_count</span><span class="p">,</span> <span class="n">pi_error</span><span class="p">,</span> <span class="n">pi</span>
    
    <span class="err">!</span> <span class="n">Calculate</span> <span class="n">Pi</span> <span class="kn">from</span> <span class="nn">trigonometric</span> <span class="n">functions</span> <span class="k">as</span> <span class="n">reference</span>
    <span class="n">pi</span>       <span class="o">=</span> <span class="n">DACOS</span><span class="p">(</span><span class="o">-</span><span class="mf">1.</span><span class="n">d0</span><span class="p">)</span>
    <span class="n">n</span>        <span class="o">=</span> <span class="mi">1000000</span>
    <span class="n">r</span>        <span class="o">=</span> <span class="mi">1</span><span class="n">d0</span>
    <span class="n">pos_x</span>    <span class="o">=</span> <span class="mi">0</span><span class="n">d0</span>
    <span class="n">pos_y</span>    <span class="o">=</span> <span class="mi">0</span><span class="n">d0</span>
    <span class="n">pi_count</span> <span class="o">=</span> <span class="mi">0</span><span class="n">d0</span>
    
    <span class="n">DO</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">n</span>
    
        <span class="n">CALL</span> <span class="n">RANDOM_NUMBER</span><span class="p">(</span><span class="n">pos_x</span><span class="p">)</span>
        <span class="n">CALL</span> <span class="n">RANDOM_NUMBER</span><span class="p">(</span><span class="n">pos_y</span><span class="p">)</span>
    
        <span class="n">IF</span> <span class="p">(</span><span class="n">in_circle</span><span class="p">(</span><span class="n">pos_x</span><span class="p">,</span> <span class="n">pos_y</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span> <span class="o">.</span><span class="n">EQV</span><span class="o">.</span> <span class="o">.</span><span class="n">TRUE</span><span class="o">.</span><span class="p">)</span> <span class="n">THEN</span> 
    
            <span class="n">pi_count</span> <span class="o">=</span> <span class="n">pi_count</span> <span class="o">+</span> <span class="mi">1</span><span class="n">d0</span>
    
        <span class="n">END</span> <span class="n">IF</span>
    <span class="n">END</span> <span class="n">DO</span>
    
    <span class="n">pi_est</span>   <span class="o">=</span> <span class="mi">4</span><span class="n">d0</span> <span class="o">*</span> <span class="n">pi_count</span> <span class="o">/</span> <span class="n">n</span>
    <span class="n">pi_error</span> <span class="o">=</span> <span class="mi">100</span><span class="n">d0</span> <span class="o">*</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">pi_est</span> <span class="o">-</span> <span class="n">pi</span><span class="p">)</span><span class="o">/</span><span class="n">pi</span><span class="p">)</span>
    
    <span class="n">WRITE</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="s1">&#39;(A, F12.4)&#39;</span><span class="p">)</span> <span class="s1">&#39;The pi estimate is: &#39;</span><span class="p">,</span> <span class="n">pi_est</span>
    <span class="n">WRITE</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="s1">&#39;(A, F12.4, A)&#39;</span><span class="p">)</span> <span class="s1">&#39;Percent error is: &#39;</span><span class="p">,</span> <span class="n">pi_error</span><span class="p">,</span> <span class="s1">&#39; %&#39;</span>
    
<span class="n">END</span> <span class="n">PROGRAM</span> <span class="n">monte_carlo</span>
</pre></div>

</div></p>
</div><div class="factor">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="n">USING</span><span class="p">:</span> <span class="nb">locals</span> <span class="n">random</span> <span class="n">math</span><span class="o">.</span><span class="n">ranges</span> <span class="n">math</span><span class="o">.</span><span class="n">functions</span> <span class="p">;</span>

<span class="p">::</span> <span class="n">monte</span><span class="o">-</span><span class="n">carlo</span> <span class="p">(</span> <span class="n">n</span> <span class="ow">in</span><span class="o">-</span><span class="n">shape</span><span class="err">?</span><span class="p">:</span> <span class="p">(</span> <span class="n">x</span> <span class="n">y</span> <span class="o">--</span> <span class="err">?</span> <span class="p">)</span> <span class="o">--</span> <span class="o">%</span> <span class="p">)</span>
  <span class="n">n</span> <span class="o">&lt;</span><span class="n">iota</span><span class="o">&gt;</span> <span class="p">[</span> <span class="n">drop</span> <span class="n">random</span><span class="o">-</span><span class="n">unit</span> <span class="n">random</span><span class="o">-</span><span class="n">unit</span> <span class="ow">in</span><span class="o">-</span><span class="n">shape</span><span class="err">?</span> <span class="n">call</span> <span class="p">]</span> <span class="n">count</span> <span class="n">n</span> <span class="o">/</span>
<span class="p">;</span> <span class="n">inline</span>

<span class="err">!</span> <span class="n">Use</span> <span class="n">the</span> <span class="n">monte</span><span class="o">-</span><span class="n">carlo</span> <span class="n">approximation</span> <span class="n">to</span> <span class="n">calculate</span> <span class="n">pi</span>
<span class="p">:</span> <span class="n">monte</span><span class="o">-</span><span class="n">carlo</span><span class="o">-</span><span class="n">pi</span> <span class="p">(</span> <span class="n">n</span> <span class="o">--</span> <span class="n">pi</span><span class="o">-</span><span class="n">approx</span> <span class="p">)</span>
  <span class="p">[</span> <span class="err">!</span> <span class="ow">in</span><span class="o">-</span><span class="n">circle</span> <span class="n">check</span>
    <span class="p">[</span> <span class="mi">2</span> <span class="o">^</span> <span class="p">]</span> <span class="n">bi</span><span class="o">@</span> <span class="o">+</span> <span class="err">!</span> <span class="n">get</span> <span class="n">the</span> <span class="n">distance</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">center</span>
    <span class="mi">1</span> <span class="o">&lt;</span>           <span class="err">!</span> <span class="n">see</span> <span class="k">if</span> <span class="n">it</span><span class="s1">&#39;s less than the radius</span>
  <span class="p">]</span>
  <span class="n">monte</span><span class="o">-</span><span class="n">carlo</span> <span class="mi">4</span> <span class="o">*</span> <span class="o">&gt;</span><span class="nb">float</span>
<span class="p">;</span>

<span class="n">USING</span><span class="p">:</span> <span class="n">math</span><span class="o">.</span><span class="n">constants</span> <span class="p">;</span>
<span class="mi">10000000</span> <span class="n">monte</span><span class="o">-</span><span class="n">carlo</span><span class="o">-</span><span class="n">pi</span> <span class="err">!</span> <span class="n">Approximate</span> <span class="n">pi</span>
<span class="n">dup</span> <span class="o">.</span>                   <span class="err">!</span> <span class="n">Print</span> <span class="n">the</span> <span class="n">approximation</span>
<span class="n">pi</span> <span class="o">-</span> <span class="n">pi</span> <span class="o">/</span> <span class="mi">100</span> <span class="o">*</span> <span class="o">&gt;</span><span class="nb">float</span> <span class="nb">abs</span> <span class="o">.</span>  <span class="err">!</span> <span class="n">And</span> <span class="n">the</span> <span class="n">error</span> <span class="n">margin</span>
</pre></div>

</div></p>
</div><div class="emojic">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="err">🐇</span> <span class="err">☝️</span> <span class="err">🍇</span>
  <span class="err">🖍🆕</span> <span class="n">x</span> <span class="err">💯</span>
  <span class="err">🖍🆕</span> <span class="n">y</span> <span class="err">💯</span>

  <span class="err">🆕</span> <span class="err">🍼</span> <span class="n">x</span> <span class="err">💯</span> <span class="err">🍼</span> <span class="n">y</span> <span class="err">💯</span> <span class="err">🍇</span> <span class="err">🍉</span>

  <span class="err">❗️</span> <span class="err">📪</span> <span class="err">➡️</span> <span class="err">💯</span> <span class="err">🍇</span>
    <span class="err">↩️</span> <span class="n">x</span>
  <span class="err">🍉</span>

  <span class="err">❗️</span> <span class="err">📫</span> <span class="err">➡️</span> <span class="err">💯</span> <span class="err">🍇</span>
    <span class="err">↩️</span> <span class="n">y</span>
  <span class="err">🍉</span>
<span class="err">🍉</span>

<span class="err">🐇</span> <span class="err">🌕</span> <span class="err">🍇</span>
  <span class="err">🖍🆕</span> <span class="n">radius</span> <span class="err">💯</span>

  <span class="err">🆕</span> <span class="n">given_radius</span> <span class="err">💯</span> <span class="err">🍇</span>
    <span class="err">🏧</span> <span class="n">given_radius</span><span class="err">❗️</span> <span class="err">➡️</span> <span class="err">🖍</span><span class="n">radius</span>
  <span class="err">🍉</span>

  <span class="err">❗️</span> <span class="err">📥</span> <span class="n">point</span> <span class="err">☝️</span> <span class="err">➡️</span> <span class="err">👌</span> <span class="err">🍇</span>
    <span class="err">📪</span> <span class="n">point</span><span class="err">❗️</span> <span class="err">➡️</span> <span class="n">point_x</span>
    <span class="err">📫</span> <span class="n">point</span><span class="err">❗️</span> <span class="err">➡️</span> <span class="n">point_y</span>
    <span class="err">↩️</span> <span class="err">🤜</span><span class="n">point_x</span> <span class="err">✖️</span> <span class="n">point_x</span> <span class="err">➕</span> <span class="n">point_y</span> <span class="err">✖️</span> <span class="n">point_y</span><span class="err">🤛</span> <span class="err">◀️</span> <span class="err">🤜</span><span class="n">radius</span> <span class="err">✖️</span> <span class="n">radius</span><span class="err">🤛</span>
  <span class="err">🍉</span>
<span class="err">🍉</span>

<span class="err">🐇</span> <span class="err">🤡</span> <span class="err">🍇</span>
  <span class="err">🐇</span> <span class="err">❗️</span> <span class="err">🏃‍♀️</span> <span class="n">samples</span> <span class="err">🔢</span> <span class="err">➡️</span> <span class="err">💯</span> <span class="err">🍇</span>
    <span class="err">🆕🌕🆕</span> <span class="mf">1.0</span> <span class="err">❗️</span> <span class="err">➡️</span> <span class="n">circle</span>
    <span class="mi">0</span> <span class="err">➡️</span> <span class="err">🖍🆕</span> <span class="n">count</span>

    <span class="err">🆕🎰🆕</span> <span class="err">❗️</span> <span class="err">➡️</span> <span class="n">random</span>

    <span class="err">🔂</span> <span class="n">i</span> <span class="err">🆕⏩⏩</span> <span class="mi">0</span> <span class="n">samples</span><span class="err">❗️</span> <span class="err">🍇</span>
      <span class="err">🆕☝️🆕</span> <span class="err">💯</span> <span class="n">random</span><span class="err">❗️</span> <span class="err">💯</span> <span class="n">random</span><span class="err">❗️❗️</span> <span class="err">➡️</span> <span class="n">point</span>
      <span class="err">↪️</span> <span class="err">📥</span> <span class="n">circle</span> <span class="n">point</span><span class="err">❗️</span> <span class="err">🍇</span>
        <span class="n">count</span> <span class="err">⬅️</span> <span class="err">➕</span> <span class="mi">1</span>
      <span class="err">🍉</span>
    <span class="err">🍉</span>

    <span class="err">↩️</span> <span class="mf">4.0</span> <span class="err">✖️</span> <span class="err">💯</span> <span class="n">count</span><span class="err">❗️</span> <span class="err">➗</span> <span class="err">💯</span><span class="n">samples</span><span class="err">❗️</span>
  <span class="err">🍉</span>
<span class="err">🍉</span>

<span class="err">🏁</span> <span class="err">🍇</span>
  <span class="err">😀</span> <span class="err">🔤</span><span class="n">Running</span> <span class="k">with</span> <span class="mi">10</span><span class="p">,</span><span class="mi">000</span><span class="p">,</span><span class="mi">000</span> <span class="n">samples</span><span class="o">.</span><span class="err">🔤❗️</span>
  <span class="err">🏃‍♀️🐇🤡</span> <span class="mi">10000000</span><span class="err">❗️</span> <span class="err">➡️</span> <span class="n">pi_estimate</span>
  <span class="err">😀</span> <span class="err">🍪🔤</span><span class="n">The</span> <span class="n">estimate</span> <span class="n">of</span> <span class="n">pi</span> <span class="ow">is</span><span class="p">:</span> <span class="err">🔤</span> <span class="err">🔡</span> <span class="n">pi_estimate</span> <span class="mi">10</span><span class="err">❗🍪❗️</span>
  <span class="err">🏧</span> <span class="err">🤜</span><span class="n">pi_estimate</span> <span class="err">➖</span> <span class="err">🥧🕊💯</span> <span class="err">❗️🤛❗️</span> <span class="err">➗</span> <span class="err">🥧🕊💯</span> <span class="err">❗️</span> <span class="err">✖️</span> <span class="mi">100</span> <span class="err">➡️</span> <span class="n">percent_error</span>
  <span class="err">😀</span> <span class="err">🍪🔤</span><span class="n">The</span> <span class="n">percent</span> <span class="n">error</span> <span class="ow">is</span><span class="p">:</span> <span class="err">🔤</span> <span class="err">🔡</span> <span class="n">percent_error</span> <span class="mi">10</span><span class="err">❗</span> <span class="err">🔤</span><span class="o">%</span><span class="err">🔤🍪❗️</span>
<span class="err">🍉</span>
</pre></div>

</div></p>
</div><div class="php">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="err">?</span><span class="n">php</span>
<span class="n">declare</span><span class="p">(</span><span class="n">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>

<span class="n">function</span> <span class="n">in_circle</span><span class="p">(</span><span class="nb">float</span> <span class="err">$</span><span class="n">positionX</span><span class="p">,</span> <span class="nb">float</span> <span class="err">$</span><span class="n">positionY</span><span class="p">,</span> <span class="nb">float</span> <span class="err">$</span><span class="n">radius</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span> <span class="nb">bool</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="nb">pow</span><span class="p">(</span><span class="err">$</span><span class="n">positionX</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="nb">pow</span><span class="p">(</span><span class="err">$</span><span class="n">positionY</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">pow</span><span class="p">(</span><span class="err">$</span><span class="n">radius</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">function</span> <span class="n">random_zero_to_one</span><span class="p">():</span> <span class="nb">float</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">mt_rand</span><span class="p">()</span> <span class="o">/</span> <span class="n">mt_getrandmax</span><span class="p">();</span>
<span class="p">}</span>

<span class="n">function</span> <span class="n">monte_carlo</span><span class="p">(</span><span class="nb">int</span> <span class="err">$</span><span class="n">samples</span><span class="p">,</span> <span class="nb">float</span> <span class="err">$</span><span class="n">radius</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span> <span class="nb">float</span>
<span class="p">{</span>
    <span class="err">$</span><span class="n">inCircleCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="err">$</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="err">$</span><span class="n">i</span> <span class="o">&lt;</span> <span class="err">$</span><span class="n">samples</span><span class="p">;</span> <span class="err">$</span><span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">in_circle</span><span class="p">(</span><span class="n">random_zero_to_one</span><span class="p">()</span> <span class="o">*</span> <span class="err">$</span><span class="n">radius</span><span class="p">,</span> <span class="n">random_zero_to_one</span><span class="p">()</span> <span class="o">*</span> <span class="err">$</span><span class="n">radius</span><span class="p">,</span> <span class="err">$</span><span class="n">radius</span><span class="p">))</span> <span class="p">{</span>
            <span class="err">$</span><span class="n">inCircleCount</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mi">4</span> <span class="o">*</span> <span class="err">$</span><span class="n">inCircleCount</span> <span class="o">/</span> <span class="err">$</span><span class="n">samples</span><span class="p">;</span>
<span class="p">}</span>

<span class="err">$</span><span class="n">piEstimate</span> <span class="o">=</span> <span class="n">monte_carlo</span><span class="p">(</span><span class="mi">10000000</span><span class="p">);</span>
<span class="err">$</span><span class="n">percentError</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="err">$</span><span class="n">piEstimate</span> <span class="o">-</span> <span class="n">pi</span><span class="p">())</span> <span class="o">/</span> <span class="n">pi</span><span class="p">()</span> <span class="o">*</span> <span class="mi">100</span><span class="p">;</span>

<span class="n">printf</span><span class="p">(</span><span class="s1">&#39;The estimate of PI is: </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="err">$</span><span class="n">piEstimate</span><span class="p">);</span>
<span class="n">echo</span> <span class="n">PHP_EOL</span><span class="p">;</span>
<span class="n">printf</span><span class="p">(</span><span class="s1">&#39;The percent error is: </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="err">$</span><span class="n">percentError</span><span class="p">);</span>
<span class="n">echo</span> <span class="n">PHP_EOL</span><span class="p">;</span>
</pre></div>

</div></p>
</div><div class="lua">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="kd">local</span> <span class="kr">function</span> <span class="nf">in_circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
  <span class="kr">return</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">*</span><span class="n">y</span> <span class="o">&lt;=</span> <span class="mi">1</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nf">monte_carlo</span><span class="p">(</span><span class="n">nsamples</span><span class="p">)</span>
  <span class="kd">local</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
  
  <span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span><span class="n">nsamples</span> <span class="kr">do</span>
    <span class="kr">if</span> <span class="n">in_circle</span><span class="p">(</span><span class="nb">math.random</span><span class="p">(),</span> <span class="nb">math.random</span><span class="p">())</span> <span class="kr">then</span>
      <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="kr">end</span>
  <span class="kr">end</span>
  
  <span class="kr">return</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">count</span><span class="o">/</span><span class="n">nsamples</span>
<span class="kr">end</span>

<span class="kd">local</span> <span class="n">pi</span> <span class="o">=</span> <span class="n">monte_carlo</span><span class="p">(</span><span class="mi">10000000</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Estimate: &quot;</span> <span class="o">..</span> <span class="n">pi</span><span class="p">)</span>
<span class="nb">print</span><span class="p">((</span><span class="s2">&quot;Error: %.2f%%&quot;</span><span class="p">):</span><span class="n">format</span><span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="nb">math.abs</span><span class="p">(</span><span class="n">pi</span><span class="o">-</span><span class="nb">math.pi</span><span class="p">)</span><span class="o">/</span><span class="nb">math.pi</span><span class="p">))</span>
</pre></div>

</div></p>
</div><div class="racket">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="c1">#lang racket</span>
<span class="p">(</span><span class="n">define</span> <span class="p">(</span><span class="n">in_circle</span> <span class="n">x</span> <span class="n">y</span><span class="p">)</span>
  <span class="p">(</span><span class="o">&lt;</span> <span class="p">(</span><span class="o">+</span> <span class="p">(</span><span class="n">sqr</span> <span class="n">x</span><span class="p">)</span> <span class="p">(</span><span class="n">sqr</span> <span class="n">y</span><span class="p">))</span> <span class="mi">1</span><span class="p">)</span>
 <span class="p">)</span>

<span class="p">(</span><span class="n">define</span> <span class="p">(</span><span class="n">monte_carlo_pi</span> <span class="n">n</span><span class="p">)</span>
  <span class="p">(</span><span class="o">*</span> <span class="p">(</span><span class="o">/</span> <span class="p">(</span><span class="n">local</span> <span class="p">((</span><span class="n">define</span> <span class="p">(</span><span class="n">monte_carlo</span><span class="o">*</span> <span class="n">n</span> <span class="n">count</span><span class="p">)</span>
                  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="o">=</span> <span class="n">n</span> <span class="mi">0</span><span class="p">)</span>
                      <span class="n">count</span>
                      <span class="p">(</span><span class="n">monte_carlo_pi</span><span class="o">*</span> <span class="p">(</span><span class="n">sub1</span> <span class="n">n</span><span class="p">)</span> 
                                    <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="n">in_circle</span> <span class="p">(</span><span class="n">random</span><span class="p">)</span> <span class="p">(</span><span class="n">random</span><span class="p">))</span> 
                                        <span class="p">(</span><span class="n">add1</span> <span class="n">count</span><span class="p">)</span>
                                        <span class="n">count</span>
                                    <span class="p">)</span>
                      <span class="p">)</span>
                  <span class="p">)</span>
               <span class="p">))</span> <span class="p">(</span><span class="n">monte_carlo_pi</span><span class="o">*</span> <span class="n">n</span> <span class="mi">0</span><span class="p">)</span>
        <span class="p">)</span> <span class="n">n</span><span class="p">)</span> <span class="mi">4</span><span class="p">)</span>
  <span class="p">)</span>


<span class="p">(</span><span class="n">display</span>  <span class="p">(</span><span class="n">monte_carlo_pi</span> <span class="mi">1000</span><span class="p">))</span>
</pre></div>

</div></p>
</div><div class="scala">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="nb">object</span> <span class="n">MonteCarlo</span> <span class="p">{</span>

  <span class="k">def</span> <span class="nf">inCircle</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">Double</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">Double</span><span class="p">)</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">*</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">1</span>

  <span class="k">def</span> <span class="nf">monteCarloPi</span><span class="p">(</span><span class="n">samples</span><span class="p">:</span> <span class="n">Int</span><span class="p">)</span> <span class="o">=</span> <span class="p">{</span>
    <span class="k">def</span> <span class="nf">randCoord</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span>

    <span class="n">var</span> <span class="n">pointCount</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">for</span> <span class="p">(</span><span class="n">_</span> <span class="o">&lt;-</span> <span class="mi">0</span> <span class="n">to</span> <span class="n">samples</span><span class="p">)</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">inCircle</span><span class="p">(</span><span class="n">randCoord</span><span class="p">,</span> <span class="n">randCoord</span><span class="p">))</span> 
        <span class="n">pointCount</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="mf">4.0</span> <span class="o">*</span> <span class="n">pointCount</span> <span class="o">/</span> <span class="n">samples</span>
  <span class="p">}</span>

  <span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">Array</span><span class="p">[</span><span class="n">String</span><span class="p">]):</span> <span class="n">Unit</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">val</span> <span class="n">approxPi</span> <span class="o">=</span> <span class="n">monteCarloPi</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="s2">&quot;Estimated pi value: &quot;</span> <span class="o">+</span> <span class="n">approxPi</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="s2">&quot;Percent error: &quot;</span> <span class="o">+</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">Math</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">approxPi</span> <span class="o">-</span> <span class="n">Math</span><span class="o">.</span><span class="n">PI</span><span class="p">)</span> <span class="o">/</span> <span class="n">Math</span><span class="o">.</span><span class="n">PI</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>

</div></p>
</div><div class="lisp">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="p">;;;;</span> <span class="n">Monte</span> <span class="n">carlo</span> <span class="n">integration</span> <span class="n">to</span> <span class="n">approximate</span> <span class="n">pi</span>

<span class="p">(</span><span class="n">defun</span> <span class="ow">in</span><span class="o">-</span><span class="n">circle</span><span class="o">-</span><span class="n">p</span> <span class="p">(</span><span class="n">x</span> <span class="n">y</span><span class="p">)</span>
  <span class="s2">&quot;Checks if a point is in a unit circle&quot;</span>
  <span class="p">(</span><span class="o">&lt;</span> <span class="p">(</span><span class="o">+</span> <span class="p">(</span><span class="o">*</span> <span class="n">x</span> <span class="n">x</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span> <span class="n">y</span> <span class="n">y</span><span class="p">))</span> <span class="mi">1</span><span class="p">))</span>

<span class="p">(</span><span class="n">defun</span> <span class="n">monte</span><span class="o">-</span><span class="n">carlo</span> <span class="p">(</span><span class="n">samples</span><span class="p">)</span>
  <span class="s2">&quot;Returns an approximation of pi&quot;</span>
  <span class="p">(</span><span class="n">loop</span> <span class="n">repeat</span> <span class="n">samples</span>
    <span class="k">with</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span> 
    <span class="n">do</span>
      <span class="p">(</span><span class="n">when</span> <span class="p">(</span><span class="ow">in</span><span class="o">-</span><span class="n">circle</span><span class="o">-</span><span class="n">p</span> <span class="p">(</span><span class="n">random</span> <span class="mf">1.0</span><span class="p">)</span> <span class="p">(</span><span class="n">random</span> <span class="mf">1.0</span><span class="p">))</span>
            <span class="p">(</span><span class="n">incf</span> <span class="n">count</span><span class="p">))</span>
    <span class="k">finally</span> <span class="p">(</span><span class="k">return</span> <span class="p">(</span><span class="o">*</span> <span class="p">(</span><span class="o">/</span> <span class="n">count</span> <span class="n">samples</span><span class="p">)</span> <span class="mf">4.0</span><span class="p">))))</span>

<span class="p">(</span><span class="n">defvar</span> <span class="n">pi</span><span class="o">-</span><span class="n">estimate</span> <span class="p">(</span><span class="n">monte</span><span class="o">-</span><span class="n">carlo</span> <span class="mi">5000000</span><span class="p">))</span>
<span class="p">(</span><span class="nb">format</span> <span class="n">t</span> <span class="s2">&quot;Estimate: ~D ~%&quot;</span> <span class="n">pi</span><span class="o">-</span><span class="n">estimate</span><span class="p">)</span>
<span class="p">(</span><span class="nb">format</span> <span class="n">t</span> <span class="s2">&quot;Error: ~D%&quot;</span> <span class="p">(</span><span class="o">*</span> <span class="p">(</span><span class="o">/</span> <span class="p">(</span><span class="nb">abs</span> <span class="p">(</span><span class="o">-</span> <span class="n">pi</span><span class="o">-</span><span class="n">estimate</span> <span class="n">pi</span><span class="p">))</span> <span class="n">pi</span><span class="p">)</span> <span class="mi">100</span><span class="p">))</span>
</pre></div>

</div></p>
</div><div class="asm-x64">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="o">.</span><span class="n">intel_syntax</span> <span class="n">noprefix</span>

<span class="o">.</span><span class="n">section</span> <span class="o">.</span><span class="n">rodata</span>
  <span class="n">pi</span><span class="p">:</span>            <span class="o">.</span><span class="n">double</span> <span class="mf">3.141592653589793</span>
  <span class="n">one</span><span class="p">:</span>           <span class="o">.</span><span class="n">double</span> <span class="mf">1.0</span>
  <span class="n">four</span><span class="p">:</span>          <span class="o">.</span><span class="n">double</span> <span class="mf">4.0</span>
  <span class="n">hundred</span><span class="p">:</span>       <span class="o">.</span><span class="n">double</span> <span class="mf">100.0</span>
  <span class="n">rand_max</span><span class="p">:</span>      <span class="o">.</span><span class="n">long</span> <span class="mi">4290772992</span>
                 <span class="o">.</span><span class="n">long</span> <span class="mi">1105199103</span>
  <span class="n">fabs_const</span><span class="p">:</span>    <span class="o">.</span><span class="n">long</span> <span class="mi">4294967295</span>
                 <span class="o">.</span><span class="n">long</span> <span class="mi">2147483647</span>
                 <span class="o">.</span><span class="n">long</span> <span class="mi">0</span>
                 <span class="o">.</span><span class="n">long</span> <span class="mi">0</span>
  <span class="n">estimate_fmt</span><span class="p">:</span>  <span class="o">.</span><span class="n">string</span> <span class="s2">&quot;The estaimate of pi is </span><span class="si">%lf</span><span class="se">\n</span><span class="s2">&quot;</span>
  <span class="n">error_fmt</span><span class="p">:</span>     <span class="o">.</span><span class="n">string</span> <span class="s2">&quot;Percentage error: </span><span class="si">%0.2f</span><span class="se">\n</span><span class="s2">&quot;</span>

<span class="o">.</span><span class="n">section</span> <span class="o">.</span><span class="n">text</span>
  <span class="o">.</span><span class="k">global</span> <span class="n">main</span>
  <span class="o">.</span><span class="n">extern</span> <span class="n">printf</span><span class="p">,</span> <span class="n">srand</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">rand</span>

<span class="c1"># xmm0 - x</span>
<span class="c1"># xmm1 - y</span>
<span class="c1"># RET rax - bool</span>
<span class="n">in_circle</span><span class="p">:</span>
  <span class="n">mulsd</span>  <span class="n">xmm0</span><span class="p">,</span> <span class="n">xmm0</span>                  <span class="c1"># Calculate x * x + y * y</span>
  <span class="n">mulsd</span>  <span class="n">xmm1</span><span class="p">,</span> <span class="n">xmm1</span>
  <span class="n">addsd</span>  <span class="n">xmm0</span><span class="p">,</span> <span class="n">xmm1</span>
  <span class="n">movsd</span>  <span class="n">xmm1</span><span class="p">,</span> <span class="n">one</span>                   <span class="c1"># Set circle radius to 1</span>
  <span class="n">xor</span>    <span class="n">rax</span><span class="p">,</span> <span class="n">rax</span>
  <span class="n">comisd</span> <span class="n">xmm1</span><span class="p">,</span> <span class="n">xmm0</span>                  <span class="c1"># Return bool xmm0 &lt; xmm1</span>
  <span class="n">seta</span> <span class="n">al</span>
  <span class="n">ret</span>

<span class="c1"># rdi - samples</span>
<span class="c1"># RET xmm0 - estimate</span>
<span class="n">monte_carlo</span><span class="p">:</span>
  <span class="n">pxor</span>   <span class="n">xmm2</span><span class="p">,</span> <span class="n">xmm2</span>                  <span class="c1"># Setting it to zero for loop</span>
  <span class="n">cvtsi2sd</span> <span class="n">xmm3</span><span class="p">,</span> <span class="n">rdi</span>                 <span class="c1"># From int to double</span>
  <span class="n">pxor</span>   <span class="n">xmm4</span><span class="p">,</span> <span class="n">xmm4</span>                  <span class="c1"># Setting to zero for counter</span>
<span class="n">monte_carlo_iter</span><span class="p">:</span>
  <span class="n">comisd</span> <span class="n">xmm2</span><span class="p">,</span> <span class="n">xmm3</span>                  <span class="c1"># Check if we went through all samples</span>
  <span class="n">je</span>     <span class="n">monte_carlo_return</span>
  <span class="n">call</span>   <span class="n">rand</span>                        <span class="c1"># Get random point in the first quartile</span>
  <span class="n">cvtsi2sd</span> <span class="n">xmm0</span><span class="p">,</span> <span class="n">rax</span>
  <span class="n">divsd</span>  <span class="n">xmm0</span><span class="p">,</span> <span class="n">rand_max</span>
  <span class="n">call</span>   <span class="n">rand</span>
  <span class="n">cvtsi2sd</span> <span class="n">xmm1</span><span class="p">,</span> <span class="n">rax</span>
  <span class="n">divsd</span>  <span class="n">xmm1</span><span class="p">,</span> <span class="n">rand_max</span>
  <span class="n">call</span>   <span class="n">in_circle</span>                   <span class="c1"># Check if its in the circle</span>
  <span class="n">test</span>   <span class="n">rax</span><span class="p">,</span> <span class="n">rax</span>
  <span class="n">jz</span>     <span class="n">monte_carlo_false</span>
  <span class="n">addsd</span>  <span class="n">xmm4</span><span class="p">,</span> <span class="n">one</span>                   <span class="c1"># if so increment counter</span>
<span class="n">monte_carlo_false</span><span class="p">:</span>
  <span class="n">addsd</span>  <span class="n">xmm2</span><span class="p">,</span> <span class="n">one</span>
  <span class="n">jmp</span>    <span class="n">monte_carlo_iter</span>
<span class="n">monte_carlo_return</span><span class="p">:</span>
  <span class="n">mulsd</span>  <span class="n">xmm4</span><span class="p">,</span> <span class="n">four</span>                  <span class="c1"># Return estimate</span>
  <span class="n">divsd</span>  <span class="n">xmm4</span><span class="p">,</span> <span class="n">xmm2</span>
  <span class="n">movsd</span>  <span class="n">xmm0</span><span class="p">,</span> <span class="n">xmm4</span>
  <span class="n">ret</span>

<span class="n">main</span><span class="p">:</span>
  <span class="n">push</span>   <span class="n">rbp</span>
  <span class="n">sub</span>    <span class="n">rsp</span><span class="p">,</span> <span class="mi">16</span>
  <span class="n">mov</span>    <span class="n">rdi</span><span class="p">,</span> <span class="mi">0</span>
  <span class="n">call</span>   <span class="n">time</span>
  <span class="n">mov</span>    <span class="n">rdi</span><span class="p">,</span> <span class="n">rax</span>
  <span class="n">call</span>   <span class="n">srand</span>
  <span class="n">mov</span>    <span class="n">rdi</span><span class="p">,</span> <span class="mi">1000000</span>
  <span class="n">call</span>   <span class="n">monte_carlo</span>
  <span class="n">movsd</span>  <span class="n">QWORD</span> <span class="n">PTR</span> <span class="p">[</span><span class="n">rsp</span><span class="p">],</span> <span class="n">xmm0</span>      <span class="c1"># Save estimate to stack</span>
  <span class="n">mov</span>    <span class="n">rdi</span><span class="p">,</span> <span class="n">OFFSET</span> <span class="n">estimate_fmt</span>   <span class="c1"># Print estimate</span>
  <span class="n">mov</span>    <span class="n">rax</span><span class="p">,</span> <span class="mi">1</span>
  <span class="n">call</span>   <span class="n">printf</span>
  <span class="n">movsd</span>  <span class="n">xmm0</span><span class="p">,</span> <span class="n">QWORD</span> <span class="n">PTR</span> <span class="p">[</span><span class="n">rsp</span><span class="p">]</span>      <span class="c1"># Get estimate from stack</span>
  <span class="n">movsd</span>  <span class="n">xmm1</span><span class="p">,</span> <span class="n">pi</span>                   <span class="c1"># Calculate fabs(M_PI - estimate)</span>
  <span class="n">subsd</span>  <span class="n">xmm0</span><span class="p">,</span> <span class="n">xmm1</span>
  <span class="n">movq</span>   <span class="n">xmm1</span><span class="p">,</span> <span class="n">fabs_const</span>
  <span class="n">andpd</span>  <span class="n">xmm0</span><span class="p">,</span> <span class="n">xmm1</span>
  <span class="n">divsd</span>  <span class="n">xmm0</span><span class="p">,</span> <span class="n">pi</span>                   <span class="c1"># Print percentage error on pi</span>
  <span class="n">mulsd</span>  <span class="n">xmm0</span><span class="p">,</span> <span class="n">hundred</span>
  <span class="n">mov</span>    <span class="n">rdi</span><span class="p">,</span> <span class="n">OFFSET</span> <span class="n">error_fmt</span>
  <span class="n">mov</span>    <span class="n">rax</span><span class="p">,</span> <span class="mi">1</span>
  <span class="n">call</span>   <span class="n">printf</span>
  <span class="n">add</span>    <span class="n">rsp</span><span class="p">,</span> <span class="mi">16</span>
  <span class="n">pop</span>    <span class="n">rbp</span>
  <span class="n">ret</span>
</pre></div>

</div></p>
</div><div class="bash">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env bash</span>
<span class="n">inCircle</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">local</span> <span class="n">ret</span>
    <span class="n">local</span> <span class="n">mag</span>
    <span class="p">((</span><span class="n">ret</span> <span class="o">=</span> <span class="mi">0</span><span class="p">))</span>
    <span class="k">if</span> <span class="p">((</span><span class="err">$</span><span class="mi">1</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="err">$</span><span class="mi">2</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">&lt;</span> <span class="mi">1073676289</span><span class="p">));</span> <span class="n">then</span> <span class="c1"># 1073676289 = 32767 ** 2</span>
        <span class="p">((</span><span class="n">ret</span> <span class="o">=</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">fi</span>
    <span class="n">printf</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="err">$</span><span class="n">ret</span>
<span class="p">}</span>

<span class="n">monteCarlo</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">local</span> <span class="n">count</span>
    <span class="n">local</span> <span class="n">i</span>
    <span class="p">((</span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">))</span>
    <span class="k">for</span> <span class="p">((</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="err">$</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">));</span> <span class="n">do</span>
        <span class="k">if</span> <span class="p">((</span><span class="err">$</span><span class="p">(</span><span class="n">inCircle</span> <span class="n">RANDOM</span> <span class="n">RANDOM</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">));</span> <span class="n">then</span>
            <span class="p">((</span><span class="n">count</span><span class="o">++</span><span class="p">))</span>
        <span class="n">fi</span>
    <span class="n">done</span>
    <span class="n">echo</span> <span class="s2">&quot;scale = 8; 4 * $count / $1&quot;</span> <span class="o">|</span> <span class="n">bc</span>
<span class="p">}</span>

<span class="n">est</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="n">monteCarlo</span> <span class="mi">10000</span><span class="p">)</span>
<span class="n">echo</span> <span class="s2">&quot;The estimate of pi is $est&quot;</span>
<span class="n">echo</span> <span class="s2">&quot;Percentage error: $(echo &quot;</span><span class="n">scale</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">sqrt</span><span class="p">(</span> <span class="p">(</span> <span class="mi">1</span> <span class="o">-</span> <span class="err">$</span><span class="n">est</span> <span class="o">/</span> <span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="n">a</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="p">)</span> <span class="o">^</span> <span class="mi">2</span> <span class="p">)</span><span class="s2">&quot; | bc -l)&quot;</span>
</pre></div>

</div></p>
</div><div class="kotlin">
<p><div class="codehilite">
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.Random</span>

<span class="n">private</span> <span class="n">fun</span> <span class="n">inCircle</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">Double</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">Double</span><span class="p">,</span> <span class="n">radius</span><span class="p">:</span> <span class="n">Double</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">*</span> <span class="n">y</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">radius</span>

<span class="n">fun</span> <span class="n">monteCarlo</span><span class="p">(</span><span class="n">samples</span><span class="p">:</span> <span class="n">Int</span><span class="p">):</span> <span class="n">Double</span> <span class="p">{</span>
    <span class="n">var</span> <span class="n">piCount</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">val</span> <span class="n">random</span> <span class="o">=</span> <span class="n">Random</span><span class="p">()</span>

    <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="ow">in</span> <span class="mi">0</span> <span class="n">until</span> <span class="n">samples</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">val</span> <span class="n">x</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">nextDouble</span><span class="p">()</span>
        <span class="n">val</span> <span class="n">y</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">nextDouble</span><span class="p">()</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">inCircle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
            <span class="n">piCount</span><span class="o">++</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mf">4.0</span> <span class="o">*</span> <span class="n">piCount</span> <span class="o">/</span> <span class="n">samples</span>
<span class="p">}</span>

<span class="n">fun</span> <span class="n">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">Array</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">val</span> <span class="n">piEstimate</span> <span class="o">=</span> <span class="n">monteCarlo</span><span class="p">(</span><span class="mi">100000</span><span class="p">)</span>
    <span class="n">println</span><span class="p">(</span><span class="s2">&quot;Estimated pi value: $piEstimate&quot;</span><span class="p">)</span>
    <span class="n">val</span> <span class="n">percentError</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">Math</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">piEstimate</span> <span class="o">-</span> <span class="n">Math</span><span class="o">.</span><span class="n">PI</span><span class="p">)</span> <span class="o">/</span> <span class="n">Math</span><span class="o">.</span><span class="n">PI</span>
    <span class="n">println</span><span class="p">(</span><span class="s2">&quot;Percent error: $percentError&quot;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>

</div></p>
</div>
</div>

<script>
MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
</script>

<h2>License</h2>
<h5>Code Examples</h5>
<p>The code examples are licensed under the MIT license (found in <a href="https://github.com/algorithm-archivists/algorithm-archive/blob/master/LICENSE.md">LICENSE.md</a>).</p>
<h5>Text</h5>
<p>The text of this chapter was written by <a href="https://github.com/leios">James Schloss</a> and is licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</p>
<p><a href="https://creativecommons.org/licenses/by-sa/4.0/"><p><img  class="center" src="../cc/CC-BY-SA_icon.svg" /></p></a></p>
<h5>Images/Graphics</h5>
<ul>
<li>The image "<a href="res/square_circle.png">squarecircle</a>" was created by <a href="https://github.com/leios">James Schloss</a> and is licenced under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</li>
<li>The animation "<a href="res/monte_carlo.gif">simplemontecarlo</a>" was created by <a href="https://github.com/leios">James Schloss</a> and is licenced under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</li>
</ul>
<h5>Pull Requests</h5>
<p>After initial licensing (<a href="https://github.com/algorithm-archivists/algorithm-archive/pull/560">#560</a>), the following pull requests have modified the text or graphics of this chapter:
- none</p>
        <hr>
    </div>
</body>
</html>